{"version":3,"sources":["../../../src/commands/client/index.ts"],"names":["program","command","helpGroup","description","longDescription","option","asyncActionProjectDir","projectDir","options","disabledServices","pushNotifications","name","reason","spinner","start","config","exp","skipSDKVersionRequirement","succeed","warn","ios","facebookAppId","facebookScheme","disabledReason","facebookLogin","googleMapsApiKey","googleMaps","googleServicesFile","contents","fs","readFile","path","resolve","user","UserManager","getCurrentUserAsync","context","Context","init","allowAnonymous","nonInteractive","parent","ensureAppleCtx","appleContext","appleCtx","getAllCredentials","username","isAllowed","errorMessage","appleTeamId","team","id","CommandError","bundleIdentifier","experienceName","appLookupParams","appleApi","ensureAppExists","enablePushNotifications","devices","travelingFastlane","listDevices","appleId","appleIdPassword","udids","map","device","deviceNumber","distributionCert","SetupIosDist","getDistCert","CreateIosDist","accountName","provideOrGenerate","pushKey","SetupIosPush","getPushKey","provisioningProfile","createOrReuseProfile","CreateOrReuseProvisioningProfileAdhoc","distCertSerialNumber","getProvisioningProfile","createOrReuse","Object","keys","length","log","newLine","table","CliTable","head","style","push","serviceKey","service","toString","email","message","default","filter","value","trim","validate","test","addUdid","udidPrompt","result","customAppConfig","urlOpts","printQRCode","registrationUrl","chalk","green","statusUrl","asyncAction","forceLatest","latest","currentSdkConfig","ClientUpgradeUtils","getExpoSdkConfig","process","cwd","currentSdkVersion","sdkVersion","undefined","sdkVersions","Versions","sdkVersionsAsync","latestSdk","newestReleasedSdkVersionAsync","currentSdk","recommendedClient","getClient","latestClient","data","url","error","bold","Simulator","upgradeExpoAsync","version","recommendedClientVersion","answer","availableClients","getAvailableClients","project","platform","targetClient","askClientToInstall","latestSdkVersion","clients","clientUrl","Android"],"mappings":"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","sourcesContent":["import { getConfig, setCustomConfigPath } from '@expo/config';\nimport { Android, Simulator, UserManager, Versions } from '@expo/xdl';\nimport chalk from 'chalk';\nimport CliTable from 'cli-table3';\nimport { Command } from 'commander';\nimport fs from 'fs-extra';\nimport ora from 'ora';\nimport path from 'path';\n\nimport CommandError from '../../CommandError';\nimport * as appleApi from '../../appleApi';\nimport { runAction, travelingFastlane } from '../../appleApi/fastlane';\nimport { getAppLookupParams } from '../../credentials/api/IosApi';\nimport { Context } from '../../credentials/context';\nimport { runCredentialsManager } from '../../credentials/route';\nimport { CreateIosDist } from '../../credentials/views/IosDistCert';\nimport { CreateOrReuseProvisioningProfileAdhoc } from '../../credentials/views/IosProvisioningProfileAdhoc';\nimport { SetupIosDist } from '../../credentials/views/SetupIosDist';\nimport { SetupIosPush } from '../../credentials/views/SetupIosPush';\nimport log from '../../log';\nimport prompt from '../../prompt';\nimport { confirmAsync } from '../../prompts';\nimport urlOpts from '../../urlOpts';\nimport * as ClientUpgradeUtils from '../utils/ClientUpgradeUtils';\nimport { createClientBuildRequest, getExperienceName, isAllowedToBuild } from './clientBuildApi';\nimport generateBundleIdentifier from './generateBundleIdentifier';\n\nexport default function (program: Command) {\n  program\n    .command('client:ios [path]')\n    .helpGroup('experimental')\n    .description(\n      'Experimental: build a custom version of the Expo client for iOS using your own Apple credentials'\n    )\n    .longDescription(\n      'Build a custom version of the Expo client for iOS using your own Apple credentials and install it on your mobile device using Safari.'\n    )\n    .option(\n      '--apple-id <login>',\n      'Apple ID username (please also set the Apple ID password as EXPO_APPLE_PASSWORD environment variable).'\n    )\n    .asyncActionProjectDir(\n      async (\n        projectDir: string,\n        options: {\n          appleId?: string;\n          config?: string;\n          parent?: {\n            nonInteractive: boolean;\n          };\n        }\n      ) => {\n        const disabledServices: { [key: string]: { name: string; reason: string } } = {\n          pushNotifications: {\n            name: 'Push Notifications',\n            reason:\n              'not yet available until API tokens are supported for the Push Notification system',\n          },\n        };\n\n        // get custom project manifest if it exists\n        // Note: this is the current developer's project, NOT the Expo client's manifest\n        const spinner = ora(`Finding custom configuration for the Expo client...`).start();\n        if (options.config) {\n          setCustomConfigPath(projectDir, options.config);\n        }\n        const { exp } = getConfig(projectDir, {\n          skipSDKVersionRequirement: true,\n        });\n\n        if (exp) {\n          spinner.succeed(`Found custom configuration for the Expo client`);\n        } else {\n          spinner.warn(`Unable to find custom configuration for the Expo client`);\n        }\n        if (!exp.ios) exp.ios = {};\n\n        if (!exp.facebookAppId || !exp.facebookScheme) {\n          const disabledReason = exp\n            ? `facebookAppId or facebookScheme are missing from app configuration. `\n            : 'No custom configuration file could be found. You will need to provide a json file with valid facebookAppId and facebookScheme fields.';\n          disabledServices.facebookLogin = { name: 'Facebook Login', reason: disabledReason };\n        }\n        if (!exp.ios.config?.googleMapsApiKey) {\n          const disabledReason = exp\n            ? `ios.config.googleMapsApiKey does not exist in the app configuration.`\n            : 'No custom configuration file could be found. You will need to provide a json file with a valid ios.config.googleMapsApiKey field.';\n          disabledServices.googleMaps = { name: 'Google Maps', reason: disabledReason };\n        }\n        if (exp.ios.googleServicesFile) {\n          const contents = await fs.readFile(\n            path.resolve(projectDir, exp.ios.googleServicesFile!),\n            'base64'\n          );\n          exp.ios.googleServicesFile = contents;\n        }\n\n        const user = await UserManager.getCurrentUserAsync();\n        const context = new Context();\n        await context.init(projectDir, {\n          ...options,\n          allowAnonymous: true,\n          nonInteractive: options.parent?.nonInteractive,\n        });\n        await context.ensureAppleCtx();\n        const appleContext = context.appleCtx;\n        if (user) {\n          await context.ios.getAllCredentials(user.username); // initialize credentials\n        }\n\n        // check if any builds are in flight\n        const { isAllowed, errorMessage } = await isAllowedToBuild({\n          user,\n          appleTeamId: appleContext.team.id,\n        });\n\n        if (!isAllowed) {\n          throw new CommandError(\n            'CLIENT_BUILD_REQUEST_NOT_ALLOWED',\n            `New Expo client build request disallowed. Reason: ${errorMessage}`\n          );\n        }\n\n        const bundleIdentifier = generateBundleIdentifier(appleContext.team.id);\n        const experienceName = await getExperienceName({ user, appleTeamId: appleContext.team.id });\n        const appLookupParams = getAppLookupParams(experienceName, bundleIdentifier);\n\n        await appleApi.ensureAppExists(appleContext, appLookupParams, {\n          enablePushNotifications: true,\n        });\n\n        const { devices } = await runAction(travelingFastlane.listDevices, [\n          '--all-ios-profile-devices',\n          appleContext.appleId,\n          appleContext.appleIdPassword,\n          appleContext.team.id,\n        ]);\n        const udids = devices.map((device: { deviceNumber?: string }) => device.deviceNumber);\n\n        let distributionCert;\n        if (user) {\n          await runCredentialsManager(context, new SetupIosDist(appLookupParams));\n          distributionCert = await context.ios.getDistCert(appLookupParams);\n        } else {\n          distributionCert = await new CreateIosDist(appLookupParams.accountName).provideOrGenerate(\n            context\n          );\n        }\n        if (!distributionCert) {\n          throw new CommandError(\n            'INSUFFICIENT_CREDENTIALS',\n            `This build request requires a valid distribution certificate.`\n          );\n        }\n\n        let pushKey;\n        if (user) {\n          await runCredentialsManager(context, new SetupIosPush(appLookupParams));\n          pushKey = await context.ios.getPushKey(appLookupParams);\n        }\n\n        let provisioningProfile;\n        const createOrReuseProfile = new CreateOrReuseProvisioningProfileAdhoc(appLookupParams, {\n          distCertSerialNumber: distributionCert.distCertSerialNumber!,\n          udids,\n        });\n        if (user) {\n          await runCredentialsManager(context, createOrReuseProfile);\n          provisioningProfile = await context.ios.getProvisioningProfile(appLookupParams);\n        } else {\n          provisioningProfile = await createOrReuseProfile.createOrReuse(context);\n        }\n        if (!provisioningProfile) {\n          throw new CommandError(\n            'INSUFFICIENT_CREDENTIALS',\n            `This build request requires a valid provisioning profile.`\n          );\n        }\n\n        // push notifications won't work if we dont have any push creds\n        // we also dont store anonymous creds, so user needs to be logged in\n        if (pushKey === null || !user) {\n          const disabledReason =\n            pushKey === null\n              ? 'you did not upload your push credentials'\n              : 'we require you to be logged in to store push credentials';\n          // TODO(quin): remove this when we fix push notifications\n          // keep the default push notification reason if we haven't implemented API tokens\n          disabledServices.pushNotifications.reason =\n            disabledServices.pushNotifications.reason || disabledReason;\n        }\n\n        if (Object.keys(disabledServices).length > 0) {\n          log.newLine();\n          log.warn('These services will be disabled in your custom Expo client:');\n          const table = new CliTable({ head: ['Service', 'Reason'], style: { head: ['cyan'] } });\n          table.push(\n            ...Object.keys(disabledServices).map(serviceKey => {\n              const service = disabledServices[serviceKey];\n              return [service.name, service.reason];\n            })\n          );\n          log(table.toString());\n          log(\n            'See https://docs.expo.io/guides/adhoc-builds/#optional-additional-configuration-steps for more details.'\n          );\n        }\n\n        let email;\n        if (user) {\n          email = user.email;\n        } else {\n          ({ email } = await prompt({\n            name: 'email',\n            message: 'Please enter an email address to notify, when the build is completed:',\n            default: context?.user?.email,\n            filter: value => value.trim(),\n            validate: (value: string) =>\n              /.+@.+/.test(value) ? true : \"That doesn't look like a valid email.\",\n          }));\n        }\n        log.newLine();\n\n        let addUdid;\n        if (udids.length === 0) {\n          log(\n            'There are no devices registered to your Apple Developer account. Please follow the instructions below to register an iOS device.'\n          );\n          addUdid = true;\n        } else {\n          log(\n            'Custom builds of the Expo client can only be installed on devices which have been registered with Apple at build-time.'\n          );\n          log('These devices are currently registered on your Apple Developer account:');\n          const table = new CliTable({ head: ['Name', 'Identifier'], style: { head: ['cyan'] } });\n          table.push(\n            ...devices.map((device: { name: string; deviceNumber: string | number }) => [\n              device.name,\n              device.deviceNumber,\n            ])\n          );\n          log(table.toString());\n\n          const udidPrompt = await confirmAsync({\n            message: 'Would you like to register a new device to use the Expo client with?',\n          });\n          addUdid = udidPrompt;\n        }\n\n        const result = await createClientBuildRequest({\n          user,\n          appleContext,\n          distributionCert,\n          provisioningProfile,\n          pushKey,\n          udids,\n          addUdid,\n          email,\n          bundleIdentifier,\n          customAppConfig: exp,\n        });\n\n        log.newLine();\n        if (addUdid) {\n          urlOpts.printQRCode(result.registrationUrl);\n          log(\n            'Open the following link on your iOS device (or scan the QR code) and follow the instructions to install the development profile:'\n          );\n          log.newLine();\n          log(chalk.green(`${result.registrationUrl}`));\n          log.newLine();\n          log('Please note that you can only register one iOS device per request.');\n          log(\n            \"After you register your device, we'll start building your client, and you'll receive an email when it's ready to install.\"\n          );\n        } else {\n          urlOpts.printQRCode(result.statusUrl);\n          log('Your custom Expo client is being built! 🛠');\n          log(\n            'Open this link on your iOS device (or scan the QR code) to view build logs and install the client:'\n          );\n          log.newLine();\n          log(chalk.green(`${result.statusUrl}`));\n        }\n        log.newLine();\n      }\n    );\n\n  program\n    .command('client:install:ios')\n    .description('Install the Expo client for iOS on the simulator')\n    .option(\n      '--latest',\n      `Install the latest version of Expo client, ignoring the current project version.`\n    )\n    .helpGroup('client')\n    .asyncAction(async (command: Command) => {\n      const forceLatest = !!command.latest;\n      const currentSdkConfig = await ClientUpgradeUtils.getExpoSdkConfig(process.cwd());\n      const currentSdkVersion = currentSdkConfig ? currentSdkConfig.sdkVersion : undefined;\n      const sdkVersions = await Versions.sdkVersionsAsync();\n      const latestSdk = await Versions.newestReleasedSdkVersionAsync();\n      const currentSdk = sdkVersions[currentSdkVersion!];\n      const recommendedClient = ClientUpgradeUtils.getClient('ios', currentSdk);\n      const latestClient = ClientUpgradeUtils.getClient('ios', latestSdk.data);\n\n      if (forceLatest) {\n        if (!latestClient?.url) {\n          log.error(\n            `Unable to find latest client version. Check your internet connection or run this command again without the ${chalk.bold(\n              '--latest'\n            )} flag.`\n          );\n          return;\n        }\n\n        if (\n          await Simulator.upgradeExpoAsync({ url: latestClient.url, version: latestClient.version })\n        ) {\n          log('Done!');\n        } else {\n          log.error(`Unable to install Expo client ${latestClient.version} for iOS.`);\n        }\n        return;\n      }\n\n      if (!currentSdkVersion) {\n        log(\n          'Could not find your Expo project. If you run this from a project, we can help pick the right Expo client version!'\n        );\n      }\n\n      if (currentSdk && !recommendedClient) {\n        log(\n          `You are currently using SDK ${currentSdkVersion}. Unfortunately, we couldn't detect the proper client version for this SDK.`\n        );\n      }\n\n      if (currentSdk && recommendedClient) {\n        const recommendedClientVersion = recommendedClient.version || 'version unknown';\n        const answer = await confirmAsync({\n          message: `You are currently using SDK ${currentSdkVersion}. Would you like to install client ${recommendedClientVersion} released for this SDK?`,\n        });\n        if (answer) {\n          await Simulator.upgradeExpoAsync({\n            url: recommendedClient.url,\n            version: recommendedClient.version,\n          });\n          log('Done!');\n          return;\n        }\n      } else {\n        const answer = await confirmAsync({\n          message: latestClient?.version\n            ? chalk`Do you want to install the latest client? {dim (${latestClient.version})}`\n            : 'Do you want to install the latest client?',\n        });\n        if (answer) {\n          await Simulator.upgradeExpoAsync({\n            url: latestClient?.url,\n            version: latestClient?.version,\n          });\n          log('Done!');\n          return;\n        }\n      }\n\n      const availableClients = ClientUpgradeUtils.getAvailableClients({\n        sdkVersions,\n        project: currentSdkConfig,\n        platform: 'ios',\n      });\n\n      if (availableClients.length === 0) {\n        const answer = await confirmAsync({\n          message: currentSdk\n            ? `We don't have a compatible client for SDK ${currentSdkVersion}. Do you want to try the latest client?`\n            : \"It looks like we don't have a compatible client. Do you want to try the latest client?\",\n        });\n        if (answer) {\n          await Simulator.upgradeExpoAsync({\n            url: latestClient?.url,\n            version: latestClient?.version,\n          });\n          log('Done!');\n        } else {\n          log('No client to install');\n        }\n        return;\n      }\n\n      const targetClient = await ClientUpgradeUtils.askClientToInstall({\n        currentSdkVersion,\n        latestSdkVersion: latestSdk.version,\n        clients: availableClients,\n      });\n\n      if (await Simulator.upgradeExpoAsync({ url: targetClient.clientUrl })) {\n        log('Done!');\n      }\n    });\n\n  program\n    .command('client:install:android')\n    .description('Install the Expo client for Android on a connected device or emulator')\n    .option(\n      '--latest',\n      `Install the latest version of Expo client, ignore the current project version.`\n    )\n    .helpGroup('client')\n    .asyncAction(async (command: Command) => {\n      const forceLatest = !!command.latest;\n      const currentSdkConfig = await ClientUpgradeUtils.getExpoSdkConfig(process.cwd());\n      const currentSdkVersion = currentSdkConfig ? currentSdkConfig.sdkVersion : undefined;\n      const sdkVersions = await Versions.sdkVersionsAsync();\n      const latestSdk = await Versions.newestReleasedSdkVersionAsync();\n      const currentSdk = sdkVersions[currentSdkVersion!];\n      const recommendedClient = ClientUpgradeUtils.getClient('android', currentSdk);\n      const latestClient = ClientUpgradeUtils.getClient('android', latestSdk.data);\n\n      if (forceLatest) {\n        if (!latestClient?.url) {\n          log.error(\n            `Unable to find latest client version. Check your internet connection or run this command again without the ${chalk.bold(\n              '--latest'\n            )} flag.`\n          );\n          return;\n        }\n\n        if (\n          await Android.upgradeExpoAsync({ url: latestClient.url, version: latestClient.version })\n        ) {\n          log('Done!');\n        } else {\n          log.error(`Unable to install Expo client ${latestClient.version} for Android.`);\n        }\n\n        return;\n      }\n\n      if (!currentSdkVersion) {\n        log(\n          'Could not find your Expo project. If you run this from a project, we can help pick the right Expo client version!'\n        );\n      }\n\n      if (currentSdk && !recommendedClient) {\n        log(\n          `You are currently using SDK ${currentSdkVersion}. Unfortunately, we couldn't detect the proper client version for this SDK.`\n        );\n      }\n\n      if (currentSdk && recommendedClient) {\n        const recommendedClientVersion = recommendedClient.version || 'version unknown';\n        const answer = await confirmAsync({\n          message: `You are currently using SDK ${currentSdkVersion}. Would you like to install client ${recommendedClientVersion} released for this SDK?`,\n        });\n        if (answer) {\n          await Android.upgradeExpoAsync({\n            url: recommendedClient.url,\n            version: recommendedClient.version,\n          });\n          log('Done!');\n          return;\n        }\n      } else {\n        const answer = await confirmAsync({\n          message: latestClient?.version\n            ? chalk`Do you want to install the latest client? {dim (${latestClient.version})}`\n            : 'Do you want to install the latest client?',\n        });\n        if (answer) {\n          await Android.upgradeExpoAsync({\n            url: latestClient?.url,\n            version: latestClient?.version,\n          });\n          log('Done!');\n          return;\n        }\n      }\n\n      const availableClients = ClientUpgradeUtils.getAvailableClients({\n        sdkVersions,\n        project: currentSdkConfig,\n        platform: 'android',\n      });\n\n      if (availableClients.length === 0) {\n        const answer = await confirmAsync({\n          message: currentSdk\n            ? `We don't have a compatible client for SDK ${currentSdkVersion}. Do you want to try the latest client?`\n            : \"It looks like we don't have a compatible client. Do you want to try the latest client?\",\n        });\n        if (answer) {\n          await Android.upgradeExpoAsync({\n            url: latestClient?.url,\n            version: latestClient?.version,\n          });\n          log('Done!');\n        } else {\n          log('No client to install');\n        }\n        return;\n      }\n\n      const targetClient = await ClientUpgradeUtils.askClientToInstall({\n        currentSdkVersion,\n        latestSdkVersion: latestSdk.version,\n        clients: availableClients,\n      });\n\n      if (await Android.upgradeExpoAsync({ url: targetClient.clientUrl })) {\n        log('Done!');\n      }\n    });\n}\n"],"file":"index.js"}