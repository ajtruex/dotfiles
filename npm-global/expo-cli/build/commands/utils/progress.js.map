{"version":3,"sources":["../../../src/commands/utils/progress.ts"],"names":["createProgressTracker","_total","bar","transferredSoFar","progress","total","undefined","ProgressBar","complete","incomplete","width","tick","transferred"],"mappings":";;;;;;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAIA,SAASA,qBAAT,CAA+BC,MAA/B,EAAiE;AAC/D,MAAIC,GAAuB,GAAG,IAA9B;AACA,MAAIC,gBAAgB,GAAG,CAAvB;AACA,SAAQC,QAAD,IAAwB;AAC7B,QAAI,CAACF,GAAD,KAASE,QAAQ,CAACC,KAAT,KAAmBC,SAAnB,IAAgCL,MAAM,KAAKK,SAApD,CAAJ,EAAoE;AAClE,YAAMD,KAAK,GAAIJ,MAAJ,aAAIA,MAAJ,cAAIA,MAAJ,GAAcG,QAAQ,CAACC,KAAlC;AACAH,MAAAA,GAAG,GAAG,KAAIK,mBAAJ,EAAgB,uBAAhB,EAAyC;AAC7CC,QAAAA,QAAQ,EAAE,GADmC;AAE7CC,QAAAA,UAAU,EAAE,GAFiC;AAG7CJ,QAAAA,KAH6C;AAI7CK,QAAAA,KAAK,EAAE;AAJsC,OAAzC,CAAN;AAMD;;AACD,QAAIR,GAAJ,EAAS;AACPA,MAAAA,GAAG,CAACS,IAAJ,CAASP,QAAQ,CAACQ,WAAT,GAAuBT,gBAAhC;AACD;;AACDA,IAAAA,gBAAgB,GAAGC,QAAQ,CAACQ,WAA5B;AACD,GAdD;AAeD","sourcesContent":["import { Progress } from 'got';\nimport ProgressBar from 'progress';\n\ntype ProgressTracker = (progress: Progress) => void;\n\nfunction createProgressTracker(_total?: number): ProgressTracker {\n  let bar: ProgressBar | null = null;\n  let transferredSoFar = 0;\n  return (progress: Progress) => {\n    if (!bar && (progress.total !== undefined || _total !== undefined)) {\n      const total = (_total ?? progress.total) as number;\n      bar = new ProgressBar('[:bar] :percent :etas', {\n        complete: '=',\n        incomplete: ' ',\n        total,\n        width: 64,\n      });\n    }\n    if (bar) {\n      bar.tick(progress.transferred - transferredSoFar);\n    }\n    transferredSoFar = progress.transferred;\n  };\n}\n\nexport { createProgressTracker };\n"],"file":"progress.js"}