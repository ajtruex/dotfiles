{"version":3,"sources":["../../../src/credentials/utils/validateKeystore.ts"],"names":["validateKeystoreAsync","keystore","keystoreBase64","keystorePassword","keyAlias","e","log","warn","temporary","write","task","Buffer","from","keystorePath","Error","stdout","message"],"mappings":";;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAEe,eAAeA,qBAAf,CAAqC;AAClDC,EAAAA,QAAQ,EAAEC,cADwC;AAElDC,EAAAA,gBAFkD;AAGlDC,EAAAA;AAHkD,CAArC,EAQZ;AACD,MAAI;AACF,UAAM,8BAAc,SAAd,CAAN;AACD,GAFD,CAEE,OAAOC,CAAP,EAAU;AACVC,mBAAIC,IAAJ,CACG,iKAAgK,6BAC/J,0BAD+J,EAE/J,0BAF+J,CAG/J,sBAJJ;;AAMA;AACD;;AAED,MAAI;AACF,UAAMC,iBAAUC,KAAV,CAAgBC,IAAhB,CAAqBC,MAAM,CAACC,IAAP,CAAYV,cAAZ,EAA4B,QAA5B,CAArB,EAA4D,MAAMW,YAAN,IAAsB;AACtF,YAAM,2BAAW,SAAX,EAAsB,CAC1B,OAD0B,EAE1B,WAF0B,EAG1BA,YAH0B,EAI1B,YAJ0B,EAK1BV,gBAL0B,EAM1B,QAN0B,EAO1BC,QAP0B,CAAtB,CAAN;AASD,KAVK,CAAN;AAWD,GAZD,CAYE,OAAOC,CAAP,EAAU;AACV,UAAM,IAAIS,KAAJ,CACH,2DACCT,CAAC,CAACU,MAAF,IAAYV,CAAC,CAACW,OACf,qJAHG,CAAN;AAKD;AACF","sourcesContent":["import spawnAsync from '@expo/spawn-async';\nimport commandExists from 'command-exists';\nimport temporary from 'tempy';\nimport terminalLink from 'terminal-link';\n\nimport log from '../../log';\n\nexport default async function validateKeystoreAsync({\n  keystore: keystoreBase64,\n  keystorePassword,\n  keyAlias,\n}: {\n  keystore: string;\n  keystorePassword: string;\n  keyAlias: string;\n}) {\n  try {\n    await commandExists('keytool');\n  } catch (e) {\n    log.warn(\n      `Couldn't validate the provided Android keystore because the 'keytool' command is not available. Make sure that you have a Java Development Kit installed. See ${terminalLink(\n        'https://openjdk.java.net',\n        'https://openjdk.java.net'\n      )} to install OpenJDK.`\n    );\n    return;\n  }\n\n  try {\n    await temporary.write.task(Buffer.from(keystoreBase64, 'base64'), async keystorePath => {\n      await spawnAsync('keytool', [\n        '-list',\n        '-keystore',\n        keystorePath,\n        '-storepass',\n        keystorePassword,\n        '-alias',\n        keyAlias,\n      ]);\n    });\n  } catch (e) {\n    throw new Error(\n      `An error occurred when validating the Android keystore: ${\n        e.stdout || e.message\n      }\\nMake sure that you provided correct credentials in 'credentials.json' and the path provided under 'keystorePath' points to a valid keystore file.`\n    );\n  }\n}\n"],"file":"validateKeystore.js"}