{"version":3,"sources":["../../../src/credentials/utils/provisioningProfile.ts"],"names":["readAppleTeam","dataBase64","profilePlist","parse","teamId","teamName","Error","readProfileName","buffer","Buffer","from","profile","toString","plist","error"],"mappings":";;;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAOA,SAASA,aAAT,CAAuBC,UAAvB,EAAsD;AAAA;;AACpD,QAAMC,YAAY,GAAGC,KAAK,CAACF,UAAD,CAA1B;AACA,QAAMG,MAAM,WAAIF,YAAY,CAAC,gBAAD,CAAhB,yCAAG,KAAiD,CAAjD,CAAf;AACA,QAAMG,QAAQ,GAAGH,YAAY,CAAC,UAAD,CAA7B;;AACA,MAAI,CAACE,MAAL,EAAa;AACX,UAAM,IAAIE,KAAJ,CAAU,qDAAV,CAAN;AACD;;AACD,SAAO;AAAEF,IAAAA,MAAF;AAAUC,IAAAA;AAAV,GAAP;AACD;;AAED,SAASE,eAAT,CAAyBN,UAAzB,EAAqD;AACnD,QAAMC,YAAY,GAAGC,KAAK,CAACF,UAAD,CAA1B;AACA,SAAOC,YAAY,CAAC,MAAD,CAAnB;AACD;;AAED,SAASC,KAAT,CAAeF,UAAf,EAAgD;AAC9C,MAAI;AACF,UAAMO,MAAM,GAAGC,MAAM,CAACC,IAAP,CAAYT,UAAZ,EAAwB,QAAxB,CAAf;AACA,UAAMU,OAAO,GAAGH,MAAM,CAACI,QAAP,CAAgB,OAAhB,CAAhB;AACA,WAAOC,iBAAMV,KAAN,CAAYQ,OAAZ,CAAP;AACD,GAJD,CAIE,OAAOG,KAAP,EAAc;AACd,UAAM,IAAIR,KAAJ,CAAU,mCAAV,CAAN;AACD;AACF","sourcesContent":["import plist, { PlistArray, PlistObject } from '@expo/plist';\n\ninterface AppleTeam {\n  teamId: string;\n  teamName: string;\n}\n\nfunction readAppleTeam(dataBase64: string): AppleTeam {\n  const profilePlist = parse(dataBase64);\n  const teamId = (profilePlist['TeamIdentifier'] as PlistArray)?.[0] as string;\n  const teamName = profilePlist['TeamName'] as string;\n  if (!teamId) {\n    throw new Error('Team identifier is missing from provisoning profile');\n  }\n  return { teamId, teamName };\n}\n\nfunction readProfileName(dataBase64: string): string {\n  const profilePlist = parse(dataBase64);\n  return profilePlist['Name'] as string;\n}\n\nfunction parse(dataBase64: string): PlistObject {\n  try {\n    const buffer = Buffer.from(dataBase64, 'base64');\n    const profile = buffer.toString('utf-8');\n    return plist.parse(profile) as PlistObject;\n  } catch (error) {\n    throw new Error('Provisioning profile is malformed');\n  }\n}\n\nexport { readAppleTeam, readProfileName };\n"],"file":"provisioningProfile.js"}