{"version":3,"file":"archiveSource.js","sourceRoot":"","sources":["../src/archiveSource.ts"],"names":[],"mappings":";;;;;;AAAA,oDAA4B;AAE5B,IAAY,iBAIX;AAJD,WAAY,iBAAiB;IAC3B,8BAAS,CAAA;IACT,gCAAW,CAAA;IACX,kCAAa,CAAA;AACf,CAAC,EAJW,iBAAiB,GAAjB,yBAAiB,KAAjB,yBAAiB,QAI5B;AAOY,QAAA,mBAAmB,GAAG,aAAG,CAAC,MAAM,CAAgB;IAC3D,IAAI,EAAE,aAAG,CAAC,MAAM,EAAE;SACf,KAAK,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;SAC1C,QAAQ,EAAE;CACd,CAAC;KACC,IAAI,CAAC,aAAG,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,iBAAiB,CAAC,EAAE,EAAE,CAAC,CAAC,OAAO,EAAE,EAAE;IAC1D,IAAI,EAAE,aAAG,CAAC,MAAM,CAAC;QACf,IAAI,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC,QAAQ,EAAE;QACzD,SAAS,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;KACnC,CAAC;CACH,CAAC;KACD,IAAI,CAAC,aAAG,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,iBAAiB,CAAC,GAAG,EAAE,CAAC,CAAC,OAAO,EAAE,EAAE;IAC3D,IAAI,EAAE,aAAG,CAAC,MAAM,CAAC;QACf,IAAI,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE;QAC1D,GAAG,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE;KACnC,CAAC;CACH,CAAC;KACD,IAAI,CAAC,aAAG,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,iBAAiB,CAAC,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,EAAE;IAC5D,IAAI,EAAE,aAAG,CAAC,MAAM,CAAC;QACf,IAAI,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE;QAC3D,IAAI,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;KAC9B,CAAC;CACH,CAAC,CAAC","sourcesContent":["import Joi from '@hapi/joi';\n\nexport enum ArchiveSourceType {\n  S3 = 'S3',\n  URL = 'URL',\n  PATH = 'PATH',\n}\n\nexport type ArchiveSource =\n  | { type: ArchiveSourceType.S3; bucketKey: string }\n  | { type: ArchiveSourceType.URL; url: string }\n  | { type: ArchiveSourceType.PATH; path: string };\n\nexport const ArchiveSourceSchema = Joi.object<ArchiveSource>({\n  type: Joi.string()\n    .valid(...Object.values(ArchiveSourceType))\n    .required(),\n})\n  .when(Joi.object({ type: ArchiveSourceType.S3 }).unknown(), {\n    then: Joi.object({\n      type: Joi.string().valid(ArchiveSourceType.S3).required(),\n      bucketKey: Joi.string().required(),\n    }),\n  })\n  .when(Joi.object({ type: ArchiveSourceType.URL }).unknown(), {\n    then: Joi.object({\n      type: Joi.string().valid(ArchiveSourceType.URL).required(),\n      url: Joi.string().uri().required(),\n    }),\n  })\n  .when(Joi.object({ type: ArchiveSourceType.PATH }).unknown(), {\n    then: Joi.object({\n      type: Joi.string().valid(ArchiveSourceType.PATH).required(),\n      path: Joi.string().required(),\n    }),\n  });\n"]}