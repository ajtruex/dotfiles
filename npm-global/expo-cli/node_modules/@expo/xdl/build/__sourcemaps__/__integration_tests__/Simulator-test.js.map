{"version":3,"sources":["__integration_tests__/Simulator-test.ts"],"names":["describe","skip","it","jest","setTimeout","Simulator","isSimulatorInstalledAsync","console","warn","isSimulatorBootedAsync","SimControl","killAllAsync","closeSimulatorAppAsync","sim","ensureSimulatorOpenAsync","Error","uninstallExpoAppFromSimulatorAsync","installExpoOnSimulatorAsync","simulator","isExpoClientInstalledOnSimulatorAsync","openURLAsync","url"],"mappings":";;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;;;;;AAEAA,QAAQ,CAACC,IAAT,CAAc,WAAd,EAA2B,MAAM;AAC/BC,EAAAA,EAAE,CAAC,6BAAD,EAAgC,YAAY;AAC5C;AACAC,IAAAA,IAAI,CAACC,UAAL,CAAgB,KAAhB,EAF4C,CAI5C;;AACA,QAAI,EAAE,MAAMC,SAAS,GAACC,yBAAV,EAAR,CAAJ,EAAoD;AAClD,aAAOC,OAAO,CAACC,IAAR,CAAa,kEAAb,CAAP;AACD,KAP2C,CAS5C;;;AACA,QAAI,MAAMH,SAAS,GAACI,sBAAV,EAAV,EAA8C;AAC5C,YAAMC,UAAU,GAACC,YAAX,EAAN;AACA,YAAMN,SAAS,GAACO,sBAAV,EAAN;AACD;;AAED,UAAM,2BAAW,IAAX,CAAN,CAf4C,CAepB;AAExB;;AACA,UAAMC,GAAG,GAAG,MAAMR,SAAS,GAACS,wBAAV,EAAlB,CAlB4C,CAoB5C;AAEA;;AACA,QAAI,EAAE,MAAMT,SAAS,GAACI,sBAAV,EAAR,CAAJ,EAAiD;AAC/C,YAAM,IAAIM,KAAJ,CACJ,oFADI,CAAN;AAGD,KA3B2C,CA6B5C;;;AACA,UAAMV,SAAS,GAACW,kCAAV,CAA6CH,GAA7C,CAAN;AACA,UAAMR,SAAS,GAACY,2BAAV,CAAsC;AAAEC,MAAAA,SAAS,EAAEL;AAAb,KAAtC,CAAN;;AACA,QAAI,EAAE,MAAMR,SAAS,GAACc,qCAAV,CAAgDN,GAAhD,CAAR,CAAJ,EAAmE;AACjE,YAAM,IAAIE,KAAJ,CAAU,6DAAV,CAAN;AACD,KAlC2C,CAoC5C;;;AACA,UAAML,UAAU,GAACU,YAAX,CAAwB;AAAEC,MAAAA,GAAG,EAAE;AAAP,KAAxB,CAAN;AAEA,UAAM,2BAAW,IAAX,CAAN,CAvC4C,CAuCpB;;AAExB,UAAMhB,SAAS,GAACW,kCAAV,EAAN;;AACA,QAAI,MAAMX,SAAS,GAACc,qCAAV,CAAgDN,GAAhD,CAAV,EAAgE;AAC9D,YAAM,IAAIE,KAAJ,CAAU,iEAAV,CAAN;AACD;;AAED,UAAMV,SAAS,GAACO,sBAAV,EAAN;;AACA,QAAI,MAAMP,SAAS,GAACI,sBAAV,EAAV,EAA8C;AAC5C,YAAM,IAAIM,KAAJ,CAAU,0CAAV,CAAN;AACD;AACF,GAlDC,CAAF;AAmDD,CApDD","sourcesContent":["import delayAsync from 'delay-async';\n\nimport * as SimControl from '../SimControl';\nimport * as Simulator from '../Simulator';\n\ndescribe.skip('simulator', () => {\n  it('opens and loads url in expo', async () => {\n    // This tests depends on the simulator, and could take some time to boot\n    jest.setTimeout(60000);\n\n    // Determine if we can run this test or not, if simulator isn't available warn and stop\n    if (!(await Simulator.isSimulatorInstalledAsync())) {\n      return console.warn(\"Simulator isn't installed on this computer; can't run this test.\");\n    }\n\n    // Quit the simulator to start the test\n    if (await Simulator.isSimulatorBootedAsync()) {\n      await SimControl.killAllAsync();\n      await Simulator.closeSimulatorAppAsync();\n    }\n\n    await delayAsync(1000); // 1s\n\n    // Open the simulator\n    const sim = await Simulator.ensureSimulatorOpenAsync();\n\n    // await delayAsync(9000); // 9s\n\n    // If its not running now, we can't test\n    if (!(await Simulator.isSimulatorBootedAsync())) {\n      throw new Error(\n        \"Simulator should be running after being opened, but we're detecting that it isn't.\"\n      );\n    }\n\n    // Use a fresh Expo install for this test\n    await Simulator.uninstallExpoAppFromSimulatorAsync(sim);\n    await Simulator.installExpoOnSimulatorAsync({ simulator: sim });\n    if (!(await Simulator.isExpoClientInstalledOnSimulatorAsync(sim))) {\n      throw new Error(\"Expo app should be installed on this simulator but it isn't\");\n    }\n\n    // Try opening an Expo project, even when it doesn't exists Expo should be open\n    await SimControl.openURLAsync({ url: 'exp://exp.host/@exponent/fluxpybird' });\n\n    await delayAsync(6000); // 6s\n\n    await Simulator.uninstallExpoAppFromSimulatorAsync();\n    if (await Simulator.isExpoClientInstalledOnSimulatorAsync(sim)) {\n      throw new Error(\"Expo app shouldn't be installed on this simulator but it is (2)\");\n    }\n\n    await Simulator.closeSimulatorAppAsync();\n    if (await Simulator.isSimulatorBootedAsync()) {\n      throw new Error(\"Simulator shouldn't be running but it is\");\n    }\n  });\n});\n"],"file":"../../__integration_tests__/Simulator-test.js","sourceRoot":"/@expo/xdl@58.0.16/src"}