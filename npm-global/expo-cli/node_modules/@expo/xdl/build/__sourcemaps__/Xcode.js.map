{"version":3,"sources":["Xcode.ts"],"names":["minimumVersion","appStoreId","getXcodeVersionAsync","stdout","match","length","last","pop","Logger","global","error","openAppStoreAsync","appId","link","getAppStoreLink","process","platform"],"mappings":";;;;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAEA;AACO,MAAMA,cAAc,GAAG,GAAvB;;AACA,MAAMC,UAAU,GAAG,WAAnB;;;AAEA,eAAeC,oBAAf,GAA8D;AACnE,MAAI;AACF,UAAM;AAAEC,MAAAA;AAAF,QAAa,MAAM,2BAAW,YAAX,EAAyB,CAAC,UAAD,CAAzB,CAAzB;AAEA,UAAMC,KAAK,GAAGD,MAAM,CAACC,KAAP,CAAa,mBAAb,CAAd;;AACA,QAAIA,KAAJ,aAAIA,KAAJ,uBAAIA,KAAK,CAAEC,MAAX,EAAmB;AACjB,YAAMC,IAAI,GAAGF,KAAK,CAACG,GAAN,EAAb,CADiB,CAEjB;;AACA,UAAID,IAAJ,EAAU;AACR,eAAQ,GAAEA,IAAK,IAAf;AACD;;AACD,aAAO,IAAP;AACD,KAXC,CAaF;;;AACAE,sBAAOC,MAAP,CAAcC,KAAd,CACE,0FADF;AAGD,GAjBD,CAiBE,gBAAM,CACN;AACD;;AACD,SAAO,IAAP;AACD;AAED;;;;;;;AAKO,eAAeC,iBAAf,CAAiCC,KAAjC,EAA+D;AACpE,QAAMC,IAAI,GAAGC,eAAe,CAACF,KAAD,CAA5B;AACA,QAAM,2BAAW,MAAX,EAAmB,CAACC,IAAD,CAAnB,CAAN;AACD;;AAED,SAASC,eAAT,CAAyBF,KAAzB,EAAgD;AAC9C,MAAIG,OAAO,CAACC,QAAR,KAAqB,QAAzB,EAAmC;AACjC;AACA,WAAQ,wCAAuCJ,KAAM,EAArD;AACD;;AACD,SAAQ,mCAAkCA,KAAM,EAAhD;AACD","sourcesContent":["import spawnAsync from '@expo/spawn-async';\n\nimport Logger from './Logger';\n\n// Based on the RN docs (Aug 2020).\nexport const minimumVersion = 9.4;\nexport const appStoreId = '497799835';\n\nexport async function getXcodeVersionAsync(): Promise<string | null> {\n  try {\n    const { stdout } = await spawnAsync('xcodebuild', ['-version']);\n\n    const match = stdout.match(/^Xcode (\\d+\\.\\d+)/);\n    if (match?.length) {\n      const last = match.pop();\n      // Convert to a semver string\n      if (last) {\n        return `${last}.0`;\n      }\n      return null;\n    }\n\n    // not sure what's going on\n    Logger.global.error(\n      'Unable to check Xcode version. Command ran successfully but no version number was found.'\n    );\n  } catch {\n    // not installed\n  }\n  return null;\n}\n\n/**\n * Open a link to the App Store. Just link in mobile apps, **never** redirect without prompting first.\n *\n * @param appId\n */\nexport async function openAppStoreAsync(appId: string): Promise<void> {\n  const link = getAppStoreLink(appId);\n  await spawnAsync('open', [link]);\n}\n\nfunction getAppStoreLink(appId: string): string {\n  if (process.platform === 'darwin') {\n    // TODO: Is there ever a case where the macappstore isn't available on mac?\n    return `macappstore://itunes.apple.com/app/id${appId}`;\n  }\n  return `https://apps.apple.com/us/app/id${appId}`;\n}\n"],"file":"../Xcode.js","sourceRoot":"/@expo/xdl@58.0.16/src"}