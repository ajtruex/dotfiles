{"version":3,"file":"encryption.umd.development.js","sources":["../../../node_modules/regenerator-runtime/runtime.js","../src/cryptoUtils.ts","../src/sha2Hash.ts","../src/hashRipemd160.ts","../src/keys.ts","../src/hmacSha256.ts","../src/aesCipher.ts","../src/utils.ts","../src/ec.ts","../src/pbkdf2.ts","../src/wallet.ts","../src/encryption.ts"],"sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","export function isSubtleCryptoAvailable(): boolean {\n  return typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n}\n\nexport function isNodeCryptoAvailable<T>(\n  withFeature: (nodeCrypto: typeof import('crypto')) => boolean | T\n): false | T;\nexport function isNodeCryptoAvailable<T>(\n  withFeature?: (nodeCrypto: typeof import('crypto')) => boolean | T\n): boolean | T {\n  try {\n    const resolvedResult = require.resolve('crypto');\n    if (!resolvedResult) {\n      return false;\n    }\n    // eslint-disable-next-line import/no-nodejs-modules,no-restricted-modules,global-require\n    const cryptoModule = require('crypto') as typeof import('crypto');\n    if (!cryptoModule) {\n      return false;\n    }\n    if (withFeature) {\n      const features = withFeature(cryptoModule);\n      return features;\n    }\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport const NO_CRYPTO_LIB =\n  'Crypto lib not found. Either the WebCrypto \"crypto.subtle\" or Node.js \"crypto\" module must be available.';\n\nexport type TriplesecDecryptSignature = (\n  arg: { data: Buffer; key: Buffer },\n  cb: (err: Error | null, buff: Buffer | null) => void\n) => void;\n\nexport interface WebCryptoLib {\n  lib: SubtleCrypto;\n  name: 'subtleCrypto';\n}\n\nexport interface NodeCryptoLib {\n  lib: typeof import('crypto');\n  name: 'nodeCrypto';\n}\n\n// Make async for future version which may lazy load.\n// eslint-disable-next-line @typescript-eslint/require-await\nexport async function getCryptoLib(): Promise<WebCryptoLib | NodeCryptoLib> {\n  if (isSubtleCryptoAvailable()) {\n    return {\n      lib: crypto.subtle,\n      name: 'subtleCrypto',\n    };\n  } else {\n    try {\n      // eslint-disable-next-line max-len\n      // eslint-disable-next-line import/no-nodejs-modules,no-restricted-modules,global-require,@typescript-eslint/no-var-requires\n      const nodeCrypto = require('crypto') as typeof import('crypto');\n      return {\n        lib: nodeCrypto,\n        name: 'nodeCrypto',\n      };\n    } catch (error) {\n      throw new Error(NO_CRYPTO_LIB);\n    }\n  }\n}\n","import { sha256, sha512 } from 'sha.js';\nimport { getCryptoLib } from './cryptoUtils';\n\ntype NodeCryptoCreateHash = typeof import('crypto').createHash;\n\nexport interface Sha2Hash {\n  digest(data: Buffer, algorithm?: 'sha256' | 'sha512'): Promise<Buffer>;\n}\n\nexport class NodeCryptoSha2Hash {\n  createHash: NodeCryptoCreateHash;\n\n  constructor(createHash: NodeCryptoCreateHash) {\n    this.createHash = createHash;\n  }\n\n  async digest(data: Buffer, algorithm = 'sha256'): Promise<Buffer> {\n    try {\n      const result = this.createHash(algorithm)\n        .update(data)\n        .digest();\n      return Promise.resolve(result);\n    } catch (error) {\n      console.log(error);\n      console.log(\n        `Error performing ${algorithm} digest with Node.js 'crypto.createHash', falling back to JS implementation.`\n      );\n      return Promise.resolve(algorithm === 'sha256' ? hashSha256Sync(data) : hashSha512Sync(data));\n    }\n  }\n}\n\nexport class WebCryptoSha2Hash implements Sha2Hash {\n  subtleCrypto: SubtleCrypto;\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto;\n  }\n\n  async digest(data: Buffer, algorithm = 'sha256'): Promise<Buffer> {\n    let algo: string;\n    if (algorithm === 'sha256') {\n      algo = 'SHA-256';\n    } else if (algorithm === 'sha512') {\n      algo = 'SHA-512';\n    } else {\n      throw new Error(`Unsupported hash algorithm ${algorithm}`);\n    }\n    try {\n      const hash = await this.subtleCrypto.digest(algo, data);\n      return Buffer.from(hash);\n    } catch (error) {\n      console.log(error);\n      console.log(\n        `Error performing ${algorithm} digest with WebCrypto, falling back to JS implementation.`\n      );\n      return Promise.resolve(algorithm === 'sha256' ? hashSha256Sync(data) : hashSha512Sync(data));\n    }\n  }\n}\n\nexport async function createSha2Hash(): Promise<Sha2Hash> {\n  const cryptoLib = await getCryptoLib();\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoSha2Hash(cryptoLib.lib);\n  } else {\n    return new NodeCryptoSha2Hash(cryptoLib.lib.createHash);\n  }\n}\n\nexport function hashSha256Sync(data: Buffer) {\n  const hash = new sha256();\n  hash.update(data);\n  return hash.digest();\n}\n\nexport function hashSha512Sync(data: Buffer) {\n  const hash = new sha512();\n  hash.update(data);\n  return hash.digest();\n}\n","import Ripemd160Polyfill from 'ripemd160-min';\nimport { isNodeCryptoAvailable } from './cryptoUtils';\n\ntype NodeCryptoCreateHash = typeof import('crypto').createHash;\n\nexport interface Ripemd160Digest {\n  digest(data: Buffer): Buffer;\n}\n\nexport class Ripemd160PolyfillDigest implements Ripemd160Digest {\n  digest(data: Buffer): Buffer {\n    const instance = new Ripemd160Polyfill();\n    instance.update(data);\n    const hash = instance.digest();\n    if (Array.isArray(hash)) {\n      return Buffer.from(hash);\n    } else {\n      return Buffer.from(hash.buffer);\n    }\n  }\n}\n\nexport class NodeCryptoRipemd160Digest implements Ripemd160Digest {\n  nodeCryptoCreateHash: NodeCryptoCreateHash;\n\n  constructor(nodeCryptoCreateHash: NodeCryptoCreateHash) {\n    this.nodeCryptoCreateHash = nodeCryptoCreateHash;\n  }\n\n  digest(data: Buffer): Buffer {\n    try {\n      return this.nodeCryptoCreateHash('rmd160')\n        .update(data)\n        .digest();\n    } catch (error) {\n      try {\n        return this.nodeCryptoCreateHash('ripemd160')\n          .update(data)\n          .digest();\n      } catch (_err) {\n        console.log(error);\n        console.log(\n          'Node.js `crypto.createHash` exists but failing to digest for ripemd160, falling back to js implementation'\n        );\n        const polyfill = new Ripemd160PolyfillDigest();\n        return polyfill.digest(data);\n      }\n    }\n  }\n}\n\nexport function createHashRipemd160() {\n  const nodeCryptoCreateHash = isNodeCryptoAvailable(nodeCrypto => {\n    if (typeof nodeCrypto.createHash === 'function') {\n      return nodeCrypto.createHash;\n    }\n    return false;\n  });\n  if (nodeCryptoCreateHash) {\n    return new NodeCryptoRipemd160Digest(nodeCryptoCreateHash);\n  } else {\n    return new Ripemd160PolyfillDigest();\n  }\n}\n\nexport function hashRipemd160(data: Buffer) {\n  const hash = createHashRipemd160();\n  return hash.digest(data);\n}\n","import { ECPair, address, networks, Network } from 'bitcoinjs-lib';\nimport { randomBytes } from './cryptoRandom';\nimport { hashSha256Sync } from './sha2Hash';\nimport { hashRipemd160 } from './hashRipemd160';\n\n/**\n *\n * @param numberOfBytes\n *\n * @ignore\n */\nexport function getEntropy(arg: number): Buffer {\n  if (!arg) {\n    arg = 32;\n  }\n  return randomBytes(arg);\n}\n\n/**\n * @ignore\n */\nexport function makeECPrivateKey() {\n  const keyPair = ECPair.makeRandom({ rng: getEntropy });\n  return keyPair.privateKey!.toString('hex');\n}\n\n/**\n * @ignore\n */\nexport function publicKeyToAddress(publicKey: string | Buffer) {\n  const publicKeyBuffer = Buffer.isBuffer(publicKey) ? publicKey : Buffer.from(publicKey, 'hex');\n  const publicKeyHash160 = hashRipemd160(hashSha256Sync(publicKeyBuffer));\n  const result = address.toBase58Check(publicKeyHash160, networks.bitcoin.pubKeyHash);\n  return result;\n}\n\n/**\n * @ignore\n */\nexport function getPublicKeyFromPrivate(privateKey: string | Buffer) {\n  const privateKeyBuffer = Buffer.isBuffer(privateKey)\n    ? privateKey\n    : Buffer.from(privateKey, 'hex');\n  const keyPair = ECPair.fromPrivateKey(privateKeyBuffer);\n  return keyPair.publicKey.toString('hex');\n}\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function hexStringToECPair(skHex: string, network?: Network): ECPair.ECPairInterface {\n  const ecPairOptions = {\n    network: network || networks.bitcoin,\n    compressed: true,\n  };\n\n  if (skHex.length === 66) {\n    if (skHex.slice(64) !== '01') {\n      throw new Error(\n        'Improperly formatted private-key hex string. 66-length hex usually ' +\n          'indicates compressed key, but last byte must be == 1'\n      );\n    }\n    return ECPair.fromPrivateKey(Buffer.from(skHex.slice(0, 64), 'hex'), ecPairOptions);\n  } else if (skHex.length === 64) {\n    ecPairOptions.compressed = false;\n    return ECPair.fromPrivateKey(Buffer.from(skHex, 'hex'), ecPairOptions);\n  } else {\n    throw new Error('Improperly formatted private-key hex string: length should be 64 or 66.');\n  }\n}\n\n/**\n *\n * @ignore\n */\nexport function ecPairToHexString(secretKey: ECPair.ECPairInterface) {\n  const ecPointHex = secretKey.privateKey!.toString('hex');\n  if (secretKey.compressed) {\n    return `${ecPointHex}01`;\n  } else {\n    return ecPointHex;\n  }\n}\n\n/**\n * Creates a bitcoin address string from an ECPair\n * @private\n * @ignore\n */\nexport function ecPairToAddress(keyPair: ECPair.ECPairInterface) {\n  const sha256 = hashSha256Sync(keyPair.publicKey);\n  const hash160 = hashRipemd160(sha256);\n  return address.toBase58Check(hash160, keyPair.network.pubKeyHash);\n}\n","import { getCryptoLib } from './cryptoUtils';\n\nexport interface Hmac {\n  digest(key: Buffer, data: Buffer): Promise<Buffer>;\n}\n\ntype NodeCryptoCreateHmac = typeof import('crypto').createHmac;\n\nexport class NodeCryptoHmacSha256 implements Hmac {\n  createHmac: NodeCryptoCreateHmac;\n\n  constructor(createHmac: NodeCryptoCreateHmac) {\n    this.createHmac = createHmac;\n  }\n\n  async digest(key: Buffer, data: Buffer): Promise<Buffer> {\n    const result = this.createHmac('sha256', key)\n      .update(data)\n      .digest();\n    return Promise.resolve(result);\n  }\n}\n\nexport class WebCryptoHmacSha256 implements Hmac {\n  subtleCrypto: SubtleCrypto;\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto;\n  }\n\n  async digest(key: Buffer, data: Buffer): Promise<Buffer> {\n    const cryptoKey = await this.subtleCrypto.importKey(\n      'raw',\n      key,\n      { name: 'HMAC', hash: 'SHA-256' },\n      true,\n      ['sign']\n    );\n    const sig = await this.subtleCrypto.sign(\n      // The `hash` is only specified for non-compliant browsers like Edge.\n      { name: 'HMAC', hash: 'SHA-256' },\n      cryptoKey,\n      data\n    );\n    return Buffer.from(sig);\n  }\n}\n\nexport async function createHmacSha256(): Promise<Hmac> {\n  const cryptoLib = await getCryptoLib();\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoHmacSha256(cryptoLib.lib);\n  } else {\n    return new NodeCryptoHmacSha256(cryptoLib.lib.createHmac);\n  }\n}\n","import { getCryptoLib } from './cryptoUtils';\n\ntype NodeCryptoCreateCipher = typeof import('crypto').createCipheriv;\ntype NodeCryptoCreateDecipher = typeof import('crypto').createDecipheriv;\n\nexport type CipherAlgorithm = 'aes-256-cbc' | 'aes-128-cbc';\n\nexport interface AesCipher {\n  encrypt(algorithm: CipherAlgorithm, key: Buffer, iv: Buffer, data: Buffer): Promise<Buffer>;\n\n  decrypt(algorithm: CipherAlgorithm, key: Buffer, iv: Buffer, data: Buffer): Promise<Buffer>;\n}\n\nexport class NodeCryptoAesCipher implements AesCipher {\n  createCipher: NodeCryptoCreateCipher;\n\n  createDecipher: NodeCryptoCreateDecipher;\n\n  constructor(createCipher: NodeCryptoCreateCipher, createDecipher: NodeCryptoCreateDecipher) {\n    this.createCipher = createCipher;\n    this.createDecipher = createDecipher;\n  }\n\n  async encrypt(\n    algorithm: CipherAlgorithm,\n    key: Buffer,\n    iv: Buffer,\n    data: Buffer\n  ): Promise<Buffer> {\n    if (algorithm !== 'aes-128-cbc' && algorithm !== 'aes-256-cbc') {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n    }\n    const cipher = this.createCipher(algorithm, key, iv);\n    const result = Buffer.concat([cipher.update(data), cipher.final()]);\n    return Promise.resolve(result);\n  }\n\n  async decrypt(\n    algorithm: CipherAlgorithm,\n    key: Buffer,\n    iv: Buffer,\n    data: Buffer\n  ): Promise<Buffer> {\n    if (algorithm !== 'aes-128-cbc' && algorithm !== 'aes-256-cbc') {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n    }\n    const cipher = this.createDecipher(algorithm, key, iv);\n    const result = Buffer.concat([cipher.update(data), cipher.final()]);\n    return Promise.resolve(result);\n  }\n}\n\nexport class WebCryptoAesCipher implements AesCipher {\n  subtleCrypto: SubtleCrypto;\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto;\n  }\n\n  async encrypt(\n    algorithm: CipherAlgorithm,\n    key: Buffer,\n    iv: Buffer,\n    data: Buffer\n  ): Promise<Buffer> {\n    let algo: string;\n    let length: number;\n    if (algorithm === 'aes-128-cbc') {\n      algo = 'AES-CBC';\n      length = 128;\n    } else if (algorithm === 'aes-256-cbc') {\n      algo = 'AES-CBC';\n      length = 256;\n    } else {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n    }\n    const cryptoKey = await this.subtleCrypto.importKey('raw', key, { name: algo, length }, false, [\n      'encrypt',\n    ]);\n    const result = await this.subtleCrypto.encrypt({ name: algo, iv }, cryptoKey, data);\n    return Buffer.from(result);\n  }\n\n  async decrypt(\n    algorithm: CipherAlgorithm,\n    key: Buffer,\n    iv: Buffer,\n    data: Buffer\n  ): Promise<Buffer> {\n    let algo: string;\n    let length: number;\n    if (algorithm === 'aes-128-cbc') {\n      algo = 'AES-CBC';\n      length = 128;\n    } else if (algorithm === 'aes-256-cbc') {\n      algo = 'AES-CBC';\n      length = 256;\n    } else {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n    }\n    const cryptoKey = await this.subtleCrypto.importKey('raw', key, { name: algo, length }, false, [\n      'decrypt',\n    ]);\n    const result = await this.subtleCrypto.decrypt({ name: algo, iv }, cryptoKey, data);\n    return Buffer.from(result);\n  }\n}\n\nexport async function createCipher(): Promise<AesCipher> {\n  const cryptoLib = await getCryptoLib();\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoAesCipher(cryptoLib.lib);\n  } else {\n    return new NodeCryptoAesCipher(cryptoLib.lib.createCipheriv, cryptoLib.lib.createDecipheriv);\n  }\n}\n","/**\n * Calculate the AES-CBC ciphertext output byte length a given input length.\n * AES has a fixed block size of 16-bytes regardless key size.\n * @ignore\n */\nexport function getAesCbcOutputLength(inputByteLength: number) {\n  // AES-CBC block mode rounds up to the next block size.\n  const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\n  return cipherTextLength;\n}\n\n/**\n * Calculate the base64 encoded string length for a given input length.\n * This is equivalent to the byte length when the string is ASCII or UTF8-8\n * encoded.\n * @param number\n */\nexport function getBase64OutputLength(inputByteLength: number) {\n  const encodedLength = Math.ceil(inputByteLength / 3) * 4;\n  return encodedLength;\n}\n\n/**\n *\n * @ignore\n */\nexport function hashCode(string: string) {\n  let hash = 0;\n  if (string.length === 0) return hash;\n  for (let i = 0; i < string.length; i++) {\n    const character = string.charCodeAt(i);\n    hash = (hash << 5) - hash + character;\n    hash &= hash;\n  }\n  return hash & 0x7fffffff;\n}\n","import { ec as EllipticCurve } from 'elliptic';\nimport * as BN from 'bn.js';\nimport { randomBytes } from './cryptoRandom';\nimport { FailedDecryptionError } from '@stacks/common';\nimport { getPublicKeyFromPrivate } from './keys';\nimport { hashSha256Sync, hashSha512Sync } from './sha2Hash';\nimport { createHmacSha256 } from './hmacSha256';\nimport { createCipher } from './aesCipher';\nimport { getAesCbcOutputLength, getBase64OutputLength } from './utils';\n\nconst ecurve = new EllipticCurve('secp256k1');\n\n/**\n * Controls how the encrypted data buffer will be encoded as a string in the JSON payload.\n * Options:\n *    `hex` -- the legacy default, file size increase 100% (2x).\n *    `base64` -- file size increased ~33%.\n * @ignore\n */\nexport type CipherTextEncoding = 'hex' | 'base64';\n\n/**\n * @ignore\n */\nexport type CipherObject = {\n  iv: string;\n  ephemeralPK: string;\n  cipherText: string;\n  /** If undefined then hex encoding is used for the `cipherText` string. */\n  cipherTextEncoding?: CipherTextEncoding;\n  mac: string;\n  wasString: boolean;\n};\n\n/**\n * @ignore\n */\nexport type SignedCipherObject = {\n  /** Hex encoded DER signature (up to 144 chars) */\n  signature: string;\n  /** Hex encoded public key (66 char length) */\n  publicKey: string;\n  /** The stringified json of a `CipherObject` */\n  cipherText: string;\n};\n\n/**\n * @ignore\n */\nexport async function aes256CbcEncrypt(\n  iv: Buffer,\n  key: Buffer,\n  plaintext: Buffer\n): Promise<Buffer> {\n  const cipher = await createCipher();\n  const result = await cipher.encrypt('aes-256-cbc', key, iv, plaintext);\n  return result;\n}\n\n/**\n * @ignore\n */\nasync function aes256CbcDecrypt(iv: Buffer, key: Buffer, ciphertext: Buffer): Promise<Buffer> {\n  const cipher = await createCipher();\n  const result = await cipher.decrypt('aes-256-cbc', key, iv, ciphertext);\n  return result;\n}\n\n/**\n * @ignore\n */\nasync function hmacSha256(key: Buffer, content: Buffer) {\n  const hmacSha256 = await createHmacSha256();\n  return hmacSha256.digest(key, content);\n}\n\n/**\n * @ignore\n */\nfunction equalConstTime(b1: Buffer, b2: Buffer) {\n  if (b1.length !== b2.length) {\n    return false;\n  }\n  let res = 0;\n  for (let i = 0; i < b1.length; i++) {\n    res |= b1[i] ^ b2[i]; // jshint ignore:line\n  }\n  return res === 0;\n}\n\n/**\n * @ignore\n */\nfunction sharedSecretToKeys(sharedSecret: Buffer): { encryptionKey: Buffer; hmacKey: Buffer } {\n  // generate mac and encryption key from shared secret\n  const hashedSecret = hashSha512Sync(sharedSecret);\n  return {\n    encryptionKey: hashedSecret.slice(0, 32),\n    hmacKey: hashedSecret.slice(32),\n  };\n}\n\n/**\n * Hex encodes a 32-byte BN.js instance.\n * The result string is zero padded and always 64 characters in length.\n * @ignore\n */\nexport function getHexFromBN(bnInput: BN): string {\n  const hexOut = bnInput.toString('hex', 64);\n  if (hexOut.length === 64) {\n    return hexOut;\n  } else if (hexOut.length < 64) {\n    // pad with leading zeros\n    // the padStart function would require node 9\n    const padding = '0'.repeat(64 - hexOut.length);\n    return `${padding}${hexOut}`;\n  } else {\n    throw new Error('Generated a > 32-byte BN for encryption. Failing.');\n  }\n}\n\n/**\n * Returns a big-endian encoded 32-byte BN.js instance.\n * The result Buffer is zero padded and always 32 bytes in length.\n * @ignore\n */\nexport function getBufferFromBN(bnInput: BN): Buffer {\n  const result = bnInput.toArrayLike(Buffer, 'be', 32);\n  if (result.byteLength !== 32) {\n    throw new Error('Generated a 32-byte BN for encryption. Failing.');\n  }\n  return result;\n}\n\n/**\n * Get details about the JSON envelope size overhead for ciphertext payloads.\n * @ignore\n */\nexport function getCipherObjectWrapper(opts: {\n  wasString: boolean;\n  cipherTextEncoding: CipherTextEncoding;\n}): {\n  /** The stringified JSON string of an empty `CipherObject`. */\n  payloadShell: string;\n  /** Total string length of all the `CipherObject` values that always have constant lengths. */\n  payloadValuesLength: number;\n} {\n  // Placeholder structure of the ciphertext payload, used to determine the\n  // stringified JSON overhead length.\n  const shell: CipherObject = {\n    iv: '',\n    ephemeralPK: '',\n    mac: '',\n    cipherText: '',\n    wasString: !!opts.wasString,\n  };\n  if (opts.cipherTextEncoding === 'base64') {\n    shell.cipherTextEncoding = 'base64';\n  }\n  // Hex encoded 16 byte buffer.\n  const ivLength = 32;\n  // Hex encoded, compressed EC pubkey of 33 bytes.\n  const ephemeralPKLength = 66;\n  // Hex encoded 32 byte hmac-sha256.\n  const macLength = 64;\n  return {\n    payloadValuesLength: ivLength + ephemeralPKLength + macLength,\n    payloadShell: JSON.stringify(shell),\n  };\n}\n\n/**\n * Get details about the JSON envelope size overhead for signed ciphertext payloads.\n * @param payloadShell - The JSON stringified empty `CipherObject`\n * @ignore\n */\nexport function getSignedCipherObjectWrapper(\n  payloadShell: string\n): {\n  /** The stringified JSON string of an empty `SignedCipherObject`. */\n  signedPayloadValuesLength: number;\n  /** Total string length of all the `SignedCipherObject` values\n   * that always have constant lengths */\n  signedPayloadShell: string;\n} {\n  // Placeholder structure of the signed ciphertext payload, used to determine the\n  // stringified JSON overhead length.\n  const shell: SignedCipherObject = {\n    signature: '',\n    publicKey: '',\n    cipherText: payloadShell,\n  };\n  // Hex encoded DER signature, up to 72 byte length.\n  const signatureLength = 144;\n  // Hex encoded 33 byte public key.\n  const publicKeyLength = 66;\n  return {\n    signedPayloadValuesLength: signatureLength + publicKeyLength,\n    signedPayloadShell: JSON.stringify(shell),\n  };\n}\n\n/**\n * Fast function that determines the final ASCII string byte length of the\n * JSON stringified ECIES encrypted payload.\n * @ignore\n */\nexport function eciesGetJsonStringLength(opts: {\n  contentLength: number;\n  wasString: boolean;\n  sign: boolean;\n  cipherTextEncoding: CipherTextEncoding;\n}): number {\n  const { payloadShell, payloadValuesLength } = getCipherObjectWrapper(opts);\n\n  // Calculate the AES output length given the input length.\n  const cipherTextLength = getAesCbcOutputLength(opts.contentLength);\n\n  // Get the encoded string length of the cipherText.\n  let encodedCipherTextLength: number;\n  if (!opts.cipherTextEncoding || opts.cipherTextEncoding === 'hex') {\n    encodedCipherTextLength = cipherTextLength * 2;\n  } else if (opts.cipherTextEncoding === 'base64') {\n    encodedCipherTextLength = getBase64OutputLength(cipherTextLength);\n  } else {\n    throw new Error(`Unexpected cipherTextEncoding \"${opts.cipherTextEncoding}\"`);\n  }\n\n  if (!opts.sign) {\n    // Add the length of the JSON envelope, ciphertext length, and length of const values.\n    return payloadShell.length + payloadValuesLength + encodedCipherTextLength;\n  } else {\n    // Get the signed version of the JSON envelope\n    const { signedPayloadShell, signedPayloadValuesLength } = getSignedCipherObjectWrapper(\n      payloadShell\n    );\n    // Add length of the JSON envelope, ciphertext length, and length of the const values.\n    return (\n      signedPayloadShell.length +\n      signedPayloadValuesLength +\n      payloadValuesLength +\n      encodedCipherTextLength\n    );\n  }\n}\n\n/**\n * Encrypt content to elliptic curve publicKey using ECIES\n * @param publicKey - secp256k1 public key hex string\n * @param content - content to encrypt\n * @return Object containing:\n *  iv (initialization vector, hex encoding),\n *  cipherText (cipher text either hex or base64 encoded),\n *  mac (message authentication code, hex encoded),\n *  ephemeral public key (hex encoded),\n *  wasString (boolean indicating with or not to return a buffer or string on decrypt)\n * @private\n * @ignore\n */\nexport async function encryptECIES(\n  publicKey: string,\n  content: Buffer,\n  wasString: boolean,\n  cipherTextEncoding?: CipherTextEncoding\n): Promise<CipherObject> {\n  const ecPK = ecurve.keyFromPublic(publicKey, 'hex').getPublic();\n  const ephemeralSK = ecurve.genKeyPair();\n  const ephemeralPK = Buffer.from(ephemeralSK.getPublic().encodeCompressed());\n  const sharedSecret = ephemeralSK.derive(ecPK) as BN;\n  const sharedSecretBuffer = getBufferFromBN(sharedSecret);\n  const sharedKeys = sharedSecretToKeys(sharedSecretBuffer);\n\n  const initializationVector = randomBytes(16);\n\n  const cipherText = await aes256CbcEncrypt(\n    initializationVector,\n    sharedKeys.encryptionKey,\n    content\n  );\n\n  const macData = Buffer.concat([initializationVector, ephemeralPK, cipherText]);\n  const mac = await hmacSha256(sharedKeys.hmacKey, macData);\n\n  let cipherTextString: string;\n  if (!cipherTextEncoding || cipherTextEncoding === 'hex') {\n    cipherTextString = cipherText.toString('hex');\n  } else if (cipherTextEncoding === 'base64') {\n    cipherTextString = cipherText.toString('base64');\n  } else {\n    throw new Error(`Unexpected cipherTextEncoding \"${cipherTextEncoding}\"`);\n  }\n\n  const result: CipherObject = {\n    iv: initializationVector.toString('hex'),\n    ephemeralPK: ephemeralPK.toString('hex'),\n    cipherText: cipherTextString,\n    mac: mac.toString('hex'),\n    wasString: !!wasString,\n  };\n  if (cipherTextEncoding && cipherTextEncoding !== 'hex') {\n    result.cipherTextEncoding = cipherTextEncoding;\n  }\n  return result;\n}\n\n/**\n * Decrypt content encrypted using ECIES\n * @param {String} privateKey - secp256k1 private key hex string\n * @param {Object} cipherObject - object to decrypt, should contain:\n *  iv (initialization vector), cipherText (cipher text),\n *  mac (message authentication code), ephemeralPublicKey\n *  wasString (boolean indicating with or not to return a buffer or string on decrypt)\n * @return {Buffer} plaintext\n * @throws {FailedDecryptionError} if unable to decrypt\n * @private\n * @ignore\n */\nexport async function decryptECIES(\n  privateKey: string,\n  cipherObject: CipherObject\n): Promise<Buffer | string> {\n  const ecSK = ecurve.keyFromPrivate(privateKey, 'hex');\n  let ephemeralPK = null;\n  try {\n    ephemeralPK = ecurve.keyFromPublic(cipherObject.ephemeralPK, 'hex').getPublic();\n  } catch (error) {\n    throw new FailedDecryptionError(\n      'Unable to get public key from cipher object. ' +\n        'You might be trying to decrypt an unencrypted object.'\n    );\n  }\n\n  const sharedSecret = ecSK.derive(ephemeralPK) as BN;\n  const sharedSecretBuffer = getBufferFromBN(sharedSecret);\n\n  const sharedKeys = sharedSecretToKeys(sharedSecretBuffer);\n\n  const ivBuffer = Buffer.from(cipherObject.iv, 'hex');\n  let cipherTextBuffer: Buffer;\n\n  if (!cipherObject.cipherTextEncoding || cipherObject.cipherTextEncoding === 'hex') {\n    cipherTextBuffer = Buffer.from(cipherObject.cipherText, 'hex');\n  } else if (cipherObject.cipherTextEncoding === 'base64') {\n    cipherTextBuffer = Buffer.from(cipherObject.cipherText, 'base64');\n  } else {\n    throw new Error(`Unexpected cipherTextEncoding \"${cipherObject.cipherText}\"`);\n  }\n\n  const macData = Buffer.concat([\n    ivBuffer,\n    Buffer.from(ephemeralPK.encodeCompressed()),\n    cipherTextBuffer,\n  ]);\n  const actualMac = await hmacSha256(sharedKeys.hmacKey, macData);\n  const expectedMac = Buffer.from(cipherObject.mac, 'hex');\n  if (!equalConstTime(expectedMac, actualMac)) {\n    throw new FailedDecryptionError('Decryption failed: failure in MAC check');\n  }\n  const plainText = await aes256CbcDecrypt(ivBuffer, sharedKeys.encryptionKey, cipherTextBuffer);\n\n  if (cipherObject.wasString) {\n    return plainText.toString();\n  } else {\n    return plainText;\n  }\n}\n\n/**\n * Sign content using ECDSA\n *\n * @param {String} privateKey - secp256k1 private key hex string\n * @param {Object} content - content to sign\n * @return {Object} contains:\n * signature - Hex encoded DER signature\n * public key - Hex encoded private string taken from privateKey\n * @private\n * @ignore\n */\nexport function signECDSA(\n  privateKey: string,\n  content: string | Buffer\n): {\n  publicKey: string;\n  signature: string;\n} {\n  const contentBuffer = content instanceof Buffer ? content : Buffer.from(content);\n  const ecPrivate = ecurve.keyFromPrivate(privateKey, 'hex');\n  const publicKey = getPublicKeyFromPrivate(privateKey);\n  const contentHash = hashSha256Sync(contentBuffer);\n  const signature = ecPrivate.sign(contentHash);\n  const signatureString: string = signature.toDER('hex');\n  return {\n    signature: signatureString,\n    publicKey,\n  };\n}\n\n/**\n * @ignore\n */\nfunction getBuffer(content: string | ArrayBuffer | Buffer) {\n  if (content instanceof Buffer) return content;\n  else if (content instanceof ArrayBuffer) return Buffer.from(content);\n  else return Buffer.from(content);\n}\n\n/**\n * Verify content using ECDSA\n * @param {String | Buffer} content - Content to verify was signed\n * @param {String} publicKey - secp256k1 private key hex string\n * @param {String} signature - Hex encoded DER signature\n * @return {Boolean} returns true when signature matches publickey + content, false if not\n * @private\n * @ignore\n */\nexport function verifyECDSA(\n  content: string | ArrayBuffer | Buffer,\n  publicKey: string,\n  signature: string\n): boolean {\n  const contentBuffer = getBuffer(content);\n  const ecPublic = ecurve.keyFromPublic(publicKey, 'hex');\n  const contentHash = hashSha256Sync(contentBuffer);\n\n  return ecPublic.verify(contentHash, <any>signature);\n}\n","import { getCryptoLib } from './cryptoUtils';\n\nexport type Pbkdf2Digests = 'sha512' | 'sha256';\n\nexport interface Pbkdf2 {\n  derive(\n    password: string,\n    salt: Buffer,\n    iterations: number,\n    keyLength: number,\n    digest: Pbkdf2Digests\n  ): Promise<Buffer>;\n}\n\ntype NodePbkdf2Fn = typeof import('crypto').pbkdf2;\n\nexport class NodeCryptoPbkdf2 implements Pbkdf2 {\n  nodePbkdf2: NodePbkdf2Fn;\n\n  constructor(nodePbkdf2: NodePbkdf2Fn) {\n    this.nodePbkdf2 = nodePbkdf2;\n  }\n\n  async derive(\n    password: string,\n    salt: Buffer,\n    iterations: number,\n    keyLength: number,\n    digest: Pbkdf2Digests\n  ): Promise<Buffer> {\n    if (digest !== 'sha512' && digest !== 'sha256') {\n      throw new Error(`Unsupported digest \"${digest}\" for Pbkdf2`);\n    }\n    return new Promise((resolve, reject) => {\n      this.nodePbkdf2(password, salt, iterations, keyLength, digest, (error, result) => {\n        if (error) {\n          reject(error);\n        }\n        resolve(result);\n      });\n    });\n  }\n}\n\nexport class WebCryptoPbkdf2 implements Pbkdf2 {\n  subtleCrypto: SubtleCrypto;\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto;\n  }\n\n  async derive(\n    password: string,\n    salt: Buffer,\n    iterations: number,\n    keyLength: number,\n    digest: Pbkdf2Digests\n  ): Promise<Buffer> {\n    let algo: string;\n    if (digest === 'sha256') {\n      algo = 'SHA-256';\n    } else if (digest === 'sha512') {\n      algo = 'SHA-512';\n    } else {\n      throw new Error(`Unsupported Pbkdf2 digest algorithm \"${digest}\"`);\n    }\n    let result: ArrayBuffer;\n    const passwordBytes = Buffer.from(password, 'utf8');\n    try {\n      const key = await this.subtleCrypto.importKey('raw', passwordBytes, 'PBKDF2', false, [\n        'deriveBits',\n      ]);\n      result = await this.subtleCrypto.deriveBits(\n        {\n          name: 'PBKDF2',\n          salt,\n          iterations,\n          hash: { name: algo },\n        },\n        key,\n        keyLength * 8\n      );\n    } catch (error) {\n      // Browser appears to support WebCrypto but missing pbkdf2 support.\n      const partialWebCrypto = new WebCryptoPartialPbkdf2(this.subtleCrypto);\n      return partialWebCrypto.derive(password, salt, iterations, keyLength, digest);\n    }\n    return Buffer.from(result);\n  }\n}\n\nexport class WebCryptoPartialPbkdf2 implements Pbkdf2 {\n  // An async implementation for browsers that support WebCrypto hmac\n  // but not pbkdf2. Extracted from crypto-browserify/pbkdf2 and modified to\n  // use WebCrypto for hmac operations.\n  // Original: https://github.com/crypto-browserify/pbkdf2/tree/v3.0.17/lib\n\n  subtleCrypto: SubtleCrypto;\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto;\n  }\n\n  async derive(\n    password: string,\n    salt: Buffer,\n    iterations: number,\n    keyLength: number,\n    digest: Pbkdf2Digests\n  ): Promise<Buffer> {\n    if (digest !== 'sha512' && digest !== 'sha256') {\n      throw new Error(`Unsupported digest \"${digest}\" for Pbkdf2`);\n    }\n    const key = Buffer.from(password, 'utf8');\n    const algo = digest === 'sha512' ? 'SHA-512' : 'SHA-256';\n    const algoOpts = { name: 'HMAC', hash: algo };\n    const hmacDigest = (key: ArrayBuffer, data: ArrayBuffer) =>\n      this.subtleCrypto\n        .importKey('raw', key, algoOpts, true, ['sign'])\n        .then(cryptoKey => this.subtleCrypto.sign(algoOpts, cryptoKey, data))\n        .then(result => new Uint8Array(result));\n\n    const DK = new Uint8Array(keyLength);\n    const saltLength = salt.length;\n    const block1 = new Uint8Array(saltLength + 4);\n    block1.set(salt);\n    let destPos = 0;\n    const hLen = digest === 'sha512' ? 64 : 32;\n    const l = Math.ceil(keyLength / hLen);\n\n    function writeUInt32BE(data: Uint8Array, value: number, offset: number) {\n      value = +value;\n      offset >>>= 0;\n      data[offset] = value >>> 24;\n      data[offset + 1] = value >>> 16;\n      data[offset + 2] = value >>> 8;\n      data[offset + 3] = value & 0xff;\n      return offset + 4;\n    }\n\n    for (let i = 1; i <= l; i++) {\n      writeUInt32BE(block1, i, saltLength);\n      // eslint-disable-next-line no-await-in-loop\n      const T = await hmacDigest(key, block1);\n      let U = T;\n      for (let j = 1; j < iterations; j++) {\n        // eslint-disable-next-line no-await-in-loop\n        U = await hmacDigest(key, U);\n        for (let k = 0; k < hLen; k++) {\n          T[k] ^= U[k];\n        }\n      }\n      DK.set(T.subarray(0, DK.byteLength - destPos), destPos);\n      destPos += hLen;\n    }\n    return Buffer.from(DK.buffer);\n  }\n}\n\nexport async function createPbkdf2(): Promise<Pbkdf2> {\n  const cryptoLib = await getCryptoLib();\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoPbkdf2(cryptoLib.lib);\n  } else {\n    return new NodeCryptoPbkdf2(cryptoLib.lib.pbkdf2);\n  }\n}\n","import { validateMnemonic, mnemonicToEntropy, entropyToMnemonic } from 'bip39';\nimport { randomBytes, GetRandomBytes } from './cryptoRandom';\nimport { createSha2Hash } from './sha2Hash';\nimport { createHmacSha256 } from './hmacSha256';\nimport { createCipher } from './aesCipher';\nimport { createPbkdf2 } from './pbkdf2';\nimport { TriplesecDecryptSignature } from './cryptoUtils';\n\n/**\n * Encrypt a raw mnemonic phrase to be password protected\n * @param {string} phrase - Raw mnemonic phrase\n * @param {string} password - Password to encrypt mnemonic with\n * @return {Promise<Buffer>} The encrypted phrase\n * @private\n * @ignore\n * */\nexport async function encryptMnemonic(\n  phrase: string,\n  password: string,\n  opts?: {\n    getRandomBytes?: GetRandomBytes;\n  }\n): Promise<Buffer> {\n  // hex encoded mnemonic string\n  let mnemonicEntropy: string;\n  try {\n    // must be bip39 mnemonic\n    mnemonicEntropy = mnemonicToEntropy(phrase);\n  } catch (error) {\n    console.error('Invalid mnemonic phrase provided');\n    console.error(error);\n    throw new Error('Not a valid bip39 mnemonic');\n  }\n\n  // normalize plaintext to fixed length byte string\n  const plaintextNormalized = Buffer.from(mnemonicEntropy, 'hex');\n\n  // AES-128-CBC with SHA256 HMAC\n  const pbkdf2 = await createPbkdf2();\n  let salt: Buffer;\n  if (opts && opts.getRandomBytes) {\n    salt = opts.getRandomBytes(16);\n  } else {\n    salt = randomBytes(16);\n  }\n  const keysAndIV = await pbkdf2.derive(password, salt, 100000, 48, 'sha512');\n  const encKey = keysAndIV.slice(0, 16);\n  const macKey = keysAndIV.slice(16, 32);\n  const iv = keysAndIV.slice(32, 48);\n\n  const cipher = await createCipher();\n  const cipherText = await cipher.encrypt('aes-128-cbc', encKey, iv, plaintextNormalized);\n\n  const hmacPayload = Buffer.concat([salt, cipherText]);\n  const hmacSha256 = await createHmacSha256();\n  const hmacDigest = await hmacSha256.digest(macKey, hmacPayload);\n\n  const payload = Buffer.concat([salt, hmacDigest, cipherText]);\n  return payload;\n}\n\n// Used to distinguish bad password during decrypt vs invalid format\nclass PasswordError extends Error {}\n\n/**\n * @ignore\n */\nasync function decryptMnemonicBuffer(dataBuffer: Buffer, password: string): Promise<string> {\n  const salt = dataBuffer.slice(0, 16);\n  const hmacSig = dataBuffer.slice(16, 48); // 32 bytes\n  const cipherText = dataBuffer.slice(48);\n  const hmacPayload = Buffer.concat([salt, cipherText]);\n\n  const pbkdf2 = await createPbkdf2();\n  const keysAndIV = await pbkdf2.derive(password, salt, 100000, 48, 'sha512');\n  const encKey = keysAndIV.slice(0, 16);\n  const macKey = keysAndIV.slice(16, 32);\n  const iv = keysAndIV.slice(32, 48);\n\n  const decipher = await createCipher();\n  const decryptedResult = await decipher.decrypt('aes-128-cbc', encKey, iv, cipherText);\n\n  const hmacSha256 = await createHmacSha256();\n  const hmacDigest = await hmacSha256.digest(macKey, hmacPayload);\n\n  // hash both hmacSig and hmacDigest so string comparison time\n  // is uncorrelated to the ciphertext\n  const sha2Hash = await createSha2Hash();\n  const hmacSigHash = await sha2Hash.digest(hmacSig);\n  const hmacDigestHash = await sha2Hash.digest(hmacDigest);\n\n  if (!hmacSigHash.equals(hmacDigestHash)) {\n    // not authentic\n    throw new PasswordError('Wrong password (HMAC mismatch)');\n  }\n\n  let mnemonic: string;\n  try {\n    mnemonic = entropyToMnemonic(decryptedResult);\n  } catch (error) {\n    console.error('Error thrown by `entropyToMnemonic`');\n    console.error(error);\n    throw new PasswordError('Wrong password (invalid plaintext)');\n  }\n  if (!validateMnemonic(mnemonic)) {\n    throw new PasswordError('Wrong password (invalid plaintext)');\n  }\n\n  return mnemonic;\n}\n\n/**\n * Decrypt legacy triplesec keys\n * @param {Buffer} dataBuffer - The encrypted key\n * @param {String} password - Password for data\n * @return {Promise<Buffer>} Decrypted seed\n * @private\n * @ignore\n */\nfunction decryptLegacy(\n  dataBuffer: Buffer,\n  password: string,\n  triplesecDecrypt?: TriplesecDecryptSignature\n): Promise<Buffer> {\n  return new Promise<Buffer>((resolve, reject) => {\n    if (!triplesecDecrypt) {\n      reject(new Error('The `triplesec.decrypt` function must be provided'));\n    }\n    triplesecDecrypt!(\n      {\n        key: Buffer.from(password),\n        data: dataBuffer,\n      },\n      (err, plaintextBuffer) => {\n        if (!err) {\n          resolve(plaintextBuffer!);\n        } else {\n          reject(err);\n        }\n      }\n    );\n  });\n}\n\n/**\n * Decrypt an encrypted mnemonic phrase with a password.\n * Legacy triplesec encrypted payloads are also supported.\n * @param data - Buffer or hex-encoded string of the encrypted mnemonic\n * @param password - Password for data\n * @return the raw mnemonic phrase\n * @private\n * @ignore\n */\nexport async function decryptMnemonic(\n  data: string | Buffer,\n  password: string,\n  triplesecDecrypt?: TriplesecDecryptSignature\n) {\n  const dataBuffer = Buffer.isBuffer(data) ? data : Buffer.from(data, 'hex');\n  try {\n    return await decryptMnemonicBuffer(dataBuffer, password);\n  } catch (err) {\n    if (err instanceof PasswordError) {\n      throw err;\n    }\n    const data = await decryptLegacy(dataBuffer, password, triplesecDecrypt);\n    return data.toString();\n  }\n}\n","import {\n  CipherTextEncoding,\n  SignedCipherObject,\n  encryptECIES,\n  decryptECIES,\n  signECDSA,\n} from './ec';\n\nimport { getPublicKeyFromPrivate } from './keys';\n\nexport interface EncryptionOptions {\n  /**\n   * If set to `true` the data is signed using ECDSA on SHA256 hashes with the user's\n   * app private key. If a string is specified, it is used as the private key instead\n   * of the user's app private key.\n   * @default false\n   */\n  sign?: boolean | string;\n  /**\n   * String encoding format for the cipherText buffer.\n   * Currently defaults to 'hex' for legacy backwards-compatibility.\n   * Only used if the `encrypt` option is also used.\n   * Note: in the future this should default to 'base64' for the significant\n   * file size reduction.\n   */\n  cipherTextEncoding?: CipherTextEncoding;\n  /**\n   * Specifies if the original unencrypted content is a ASCII or UTF-8 string.\n   * For example stringified JSON.\n   * If true, then when the ciphertext is decrypted, it will be returned as\n   * a `string` type variable, otherwise will be returned as a Buffer.\n   */\n  wasString?: boolean;\n}\n\n/**\n * Specify encryption options, and whether to sign the ciphertext.\n */\nexport interface EncryptContentOptions extends EncryptionOptions {\n  /**\n   * Encrypt the data with this key.\n   */\n  publicKey?: string;\n  /**\n   * Encrypt the data with the public key corresponding to the supplied private key\n   */\n  privateKey?: string;\n}\n\n/**\n * Encrypts the data provided with the app public key.\n * @param {String|Buffer} content - data to encrypt\n * @param {Object} [options=null] - options object\n * @param {String} options.publicKey - the hex string of the ECDSA public\n * key to use for encryption. If not provided, will use user's appPublicKey.\n * @return {String} Stringified ciphertext object\n */\nexport async function encryptContent(\n  content: string | Buffer,\n  options?: EncryptContentOptions\n): Promise<string> {\n  const opts = Object.assign({}, options);\n  let privateKey: string | undefined;\n  if (!opts.publicKey) {\n    if (!opts.privateKey) {\n      throw new Error('Either public key or private key must be supplied for encryption.');\n    }\n    opts.publicKey = getPublicKeyFromPrivate(opts.privateKey);\n  }\n  let wasString: boolean;\n  if (typeof opts.wasString === 'boolean') {\n    wasString = opts.wasString;\n  } else {\n    wasString = typeof content === 'string';\n  }\n  const contentBuffer = typeof content === 'string' ? Buffer.from(content) : content;\n  const cipherObject = await encryptECIES(\n    opts.publicKey,\n    contentBuffer,\n    wasString,\n    opts.cipherTextEncoding\n  );\n  let cipherPayload = JSON.stringify(cipherObject);\n  if (opts.sign) {\n    if (typeof opts.sign === 'string') {\n      privateKey = opts.sign;\n    } else if (!privateKey) {\n      privateKey = opts.privateKey;\n    }\n    const signatureObject = signECDSA(privateKey!, cipherPayload);\n    const signedCipherObject: SignedCipherObject = {\n      signature: signatureObject.signature,\n      publicKey: signatureObject.publicKey,\n      cipherText: cipherPayload,\n    };\n    cipherPayload = JSON.stringify(signedCipherObject);\n  }\n  return cipherPayload;\n}\n\n/**\n * Decrypts data encrypted with `encryptContent` with the\n * transit private key.\n * @param {String|Buffer} content - encrypted content.\n * @param {Object} [options=null] - options object\n * @param {String} options.privateKey - the hex string of the ECDSA private\n * key to use for decryption. If not provided, will use user's appPrivateKey.\n * @return {String|Buffer} decrypted content.\n */\nexport function decryptContent(\n  content: string,\n  options?: {\n    privateKey?: string;\n  }\n): Promise<string | Buffer> {\n  const opts = Object.assign({}, options);\n  if (!opts.privateKey) {\n    throw new Error('Private key is required for decryption.');\n  }\n\n  try {\n    const cipherObject = JSON.parse(content);\n    return decryptECIES(opts.privateKey, cipherObject);\n  } catch (err) {\n    if (err instanceof SyntaxError) {\n      throw new Error(\n        'Failed to parse encrypted content JSON. The content may not ' +\n          'be encrypted. If using getFile, try passing { decrypt: false }.'\n      );\n    } else {\n      throw err;\n    }\n  }\n}\n"],"names":["runtime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","undefined","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","fn","arg","type","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","constructor","displayName","defineIteratorMethods","forEach","method","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","then","unwrapped","error","previousPromise","enqueue","callInvokeWithMethodAndArg","async","Promise","iter","next","done","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","info","resultName","nextLoc","toString","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","keys","object","reverse","length","pop","iterable","iteratorMethod","isNaN","i","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","isSubtleCryptoAvailable","crypto","subtle","isNodeCryptoAvailable","withFeature","resolvedResult","require","cryptoModule","features","NO_CRYPTO_LIB","getCryptoLib","lib","nodeCrypto","NodeCryptoSha2Hash","createHash","digest","data","algorithm","update","console","log","hashSha256Sync","hashSha512Sync","WebCryptoSha2Hash","subtleCrypto","algo","hash","Buffer","from","createSha2Hash","cryptoLib","sha256","sha512","Ripemd160PolyfillDigest","instance","Ripemd160Polyfill","Array","isArray","buffer","NodeCryptoRipemd160Digest","nodeCryptoCreateHash","_err","polyfill","createHashRipemd160","hashRipemd160","getEntropy","randomBytes","makeECPrivateKey","keyPair","ECPair","makeRandom","rng","privateKey","publicKeyToAddress","publicKey","publicKeyBuffer","isBuffer","publicKeyHash160","address","toBase58Check","networks","bitcoin","pubKeyHash","getPublicKeyFromPrivate","privateKeyBuffer","fromPrivateKey","hexStringToECPair","skHex","network","ecPairOptions","compressed","ecPairToHexString","secretKey","ecPointHex","ecPairToAddress","hash160","NodeCryptoHmacSha256","createHmac","WebCryptoHmacSha256","importKey","cryptoKey","sign","sig","createHmacSha256","NodeCryptoAesCipher","createCipher","createDecipher","encrypt","iv","cipher","concat","decrypt","WebCryptoAesCipher","createCipheriv","createDecipheriv","getAesCbcOutputLength","inputByteLength","cipherTextLength","Math","floor","getBase64OutputLength","encodedLength","ceil","hashCode","string","character","charCodeAt","ecurve","EllipticCurve","aes256CbcEncrypt","plaintext","aes256CbcDecrypt","ciphertext","hmacSha256","content","equalConstTime","b1","b2","res","sharedSecretToKeys","sharedSecret","hashedSecret","encryptionKey","hmacKey","getHexFromBN","bnInput","hexOut","padding","repeat","getBufferFromBN","toArrayLike","byteLength","getCipherObjectWrapper","opts","shell","ephemeralPK","mac","cipherText","wasString","cipherTextEncoding","ivLength","ephemeralPKLength","macLength","payloadValuesLength","payloadShell","JSON","stringify","getSignedCipherObjectWrapper","signature","signatureLength","publicKeyLength","signedPayloadValuesLength","signedPayloadShell","eciesGetJsonStringLength","contentLength","encodedCipherTextLength","encryptECIES","ecPK","keyFromPublic","getPublic","ephemeralSK","genKeyPair","encodeCompressed","derive","sharedSecretBuffer","sharedKeys","initializationVector","macData","cipherTextString","decryptECIES","cipherObject","ecSK","keyFromPrivate","FailedDecryptionError","ivBuffer","cipherTextBuffer","actualMac","expectedMac","plainText","signECDSA","contentBuffer","ecPrivate","contentHash","signatureString","toDER","getBuffer","ArrayBuffer","verifyECDSA","ecPublic","verify","NodeCryptoPbkdf2","nodePbkdf2","password","salt","iterations","keyLength","WebCryptoPbkdf2","passwordBytes","deriveBits","partialWebCrypto","WebCryptoPartialPbkdf2","writeUInt32BE","offset","algoOpts","hmacDigest","Uint8Array","DK","saltLength","block1","set","destPos","hLen","l","T","U","j","k","subarray","createPbkdf2","pbkdf2","encryptMnemonic","phrase","mnemonicEntropy","mnemonicToEntropy","plaintextNormalized","getRandomBytes","keysAndIV","encKey","macKey","hmacPayload","payload","PasswordError","decryptMnemonicBuffer","dataBuffer","hmacSig","decipher","decryptedResult","sha2Hash","hmacSigHash","hmacDigestHash","equals","mnemonic","entropyToMnemonic","validateMnemonic","decryptLegacy","triplesecDecrypt","plaintextBuffer","decryptMnemonic","encryptContent","options","assign","cipherPayload","signatureObject","signedCipherObject","decryptContent","parse","SyntaxError"],"mappings":"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"}