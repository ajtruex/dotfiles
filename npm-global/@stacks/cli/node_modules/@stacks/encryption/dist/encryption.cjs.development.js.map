{"version":3,"file":"encryption.cjs.development.js","sources":["../../../node_modules/regenerator-runtime/runtime.js","../src/cryptoUtils.ts","../src/sha2Hash.ts","../src/hashRipemd160.ts","../src/keys.ts","../src/hmacSha256.ts","../src/aesCipher.ts","../src/utils.ts","../src/ec.ts","../src/pbkdf2.ts","../src/wallet.ts","../src/encryption.ts"],"sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","export function isSubtleCryptoAvailable(): boolean {\n  return typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n}\n\nexport function isNodeCryptoAvailable<T>(\n  withFeature: (nodeCrypto: typeof import('crypto')) => boolean | T\n): false | T;\nexport function isNodeCryptoAvailable<T>(\n  withFeature?: (nodeCrypto: typeof import('crypto')) => boolean | T\n): boolean | T {\n  try {\n    const resolvedResult = require.resolve('crypto');\n    if (!resolvedResult) {\n      return false;\n    }\n    // eslint-disable-next-line import/no-nodejs-modules,no-restricted-modules,global-require\n    const cryptoModule = require('crypto') as typeof import('crypto');\n    if (!cryptoModule) {\n      return false;\n    }\n    if (withFeature) {\n      const features = withFeature(cryptoModule);\n      return features;\n    }\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport const NO_CRYPTO_LIB =\n  'Crypto lib not found. Either the WebCrypto \"crypto.subtle\" or Node.js \"crypto\" module must be available.';\n\nexport type TriplesecDecryptSignature = (\n  arg: { data: Buffer; key: Buffer },\n  cb: (err: Error | null, buff: Buffer | null) => void\n) => void;\n\nexport interface WebCryptoLib {\n  lib: SubtleCrypto;\n  name: 'subtleCrypto';\n}\n\nexport interface NodeCryptoLib {\n  lib: typeof import('crypto');\n  name: 'nodeCrypto';\n}\n\n// Make async for future version which may lazy load.\n// eslint-disable-next-line @typescript-eslint/require-await\nexport async function getCryptoLib(): Promise<WebCryptoLib | NodeCryptoLib> {\n  if (isSubtleCryptoAvailable()) {\n    return {\n      lib: crypto.subtle,\n      name: 'subtleCrypto',\n    };\n  } else {\n    try {\n      // eslint-disable-next-line max-len\n      // eslint-disable-next-line import/no-nodejs-modules,no-restricted-modules,global-require,@typescript-eslint/no-var-requires\n      const nodeCrypto = require('crypto') as typeof import('crypto');\n      return {\n        lib: nodeCrypto,\n        name: 'nodeCrypto',\n      };\n    } catch (error) {\n      throw new Error(NO_CRYPTO_LIB);\n    }\n  }\n}\n","import { sha256, sha512 } from 'sha.js';\nimport { getCryptoLib } from './cryptoUtils';\n\ntype NodeCryptoCreateHash = typeof import('crypto').createHash;\n\nexport interface Sha2Hash {\n  digest(data: Buffer, algorithm?: 'sha256' | 'sha512'): Promise<Buffer>;\n}\n\nexport class NodeCryptoSha2Hash {\n  createHash: NodeCryptoCreateHash;\n\n  constructor(createHash: NodeCryptoCreateHash) {\n    this.createHash = createHash;\n  }\n\n  async digest(data: Buffer, algorithm = 'sha256'): Promise<Buffer> {\n    try {\n      const result = this.createHash(algorithm)\n        .update(data)\n        .digest();\n      return Promise.resolve(result);\n    } catch (error) {\n      console.log(error);\n      console.log(\n        `Error performing ${algorithm} digest with Node.js 'crypto.createHash', falling back to JS implementation.`\n      );\n      return Promise.resolve(algorithm === 'sha256' ? hashSha256Sync(data) : hashSha512Sync(data));\n    }\n  }\n}\n\nexport class WebCryptoSha2Hash implements Sha2Hash {\n  subtleCrypto: SubtleCrypto;\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto;\n  }\n\n  async digest(data: Buffer, algorithm = 'sha256'): Promise<Buffer> {\n    let algo: string;\n    if (algorithm === 'sha256') {\n      algo = 'SHA-256';\n    } else if (algorithm === 'sha512') {\n      algo = 'SHA-512';\n    } else {\n      throw new Error(`Unsupported hash algorithm ${algorithm}`);\n    }\n    try {\n      const hash = await this.subtleCrypto.digest(algo, data);\n      return Buffer.from(hash);\n    } catch (error) {\n      console.log(error);\n      console.log(\n        `Error performing ${algorithm} digest with WebCrypto, falling back to JS implementation.`\n      );\n      return Promise.resolve(algorithm === 'sha256' ? hashSha256Sync(data) : hashSha512Sync(data));\n    }\n  }\n}\n\nexport async function createSha2Hash(): Promise<Sha2Hash> {\n  const cryptoLib = await getCryptoLib();\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoSha2Hash(cryptoLib.lib);\n  } else {\n    return new NodeCryptoSha2Hash(cryptoLib.lib.createHash);\n  }\n}\n\nexport function hashSha256Sync(data: Buffer) {\n  const hash = new sha256();\n  hash.update(data);\n  return hash.digest();\n}\n\nexport function hashSha512Sync(data: Buffer) {\n  const hash = new sha512();\n  hash.update(data);\n  return hash.digest();\n}\n","import Ripemd160Polyfill from 'ripemd160-min';\nimport { isNodeCryptoAvailable } from './cryptoUtils';\n\ntype NodeCryptoCreateHash = typeof import('crypto').createHash;\n\nexport interface Ripemd160Digest {\n  digest(data: Buffer): Buffer;\n}\n\nexport class Ripemd160PolyfillDigest implements Ripemd160Digest {\n  digest(data: Buffer): Buffer {\n    const instance = new Ripemd160Polyfill();\n    instance.update(data);\n    const hash = instance.digest();\n    if (Array.isArray(hash)) {\n      return Buffer.from(hash);\n    } else {\n      return Buffer.from(hash.buffer);\n    }\n  }\n}\n\nexport class NodeCryptoRipemd160Digest implements Ripemd160Digest {\n  nodeCryptoCreateHash: NodeCryptoCreateHash;\n\n  constructor(nodeCryptoCreateHash: NodeCryptoCreateHash) {\n    this.nodeCryptoCreateHash = nodeCryptoCreateHash;\n  }\n\n  digest(data: Buffer): Buffer {\n    try {\n      return this.nodeCryptoCreateHash('rmd160')\n        .update(data)\n        .digest();\n    } catch (error) {\n      try {\n        return this.nodeCryptoCreateHash('ripemd160')\n          .update(data)\n          .digest();\n      } catch (_err) {\n        console.log(error);\n        console.log(\n          'Node.js `crypto.createHash` exists but failing to digest for ripemd160, falling back to js implementation'\n        );\n        const polyfill = new Ripemd160PolyfillDigest();\n        return polyfill.digest(data);\n      }\n    }\n  }\n}\n\nexport function createHashRipemd160() {\n  const nodeCryptoCreateHash = isNodeCryptoAvailable(nodeCrypto => {\n    if (typeof nodeCrypto.createHash === 'function') {\n      return nodeCrypto.createHash;\n    }\n    return false;\n  });\n  if (nodeCryptoCreateHash) {\n    return new NodeCryptoRipemd160Digest(nodeCryptoCreateHash);\n  } else {\n    return new Ripemd160PolyfillDigest();\n  }\n}\n\nexport function hashRipemd160(data: Buffer) {\n  const hash = createHashRipemd160();\n  return hash.digest(data);\n}\n","import { ECPair, address, networks, Network } from 'bitcoinjs-lib';\nimport { randomBytes } from './cryptoRandom';\nimport { hashSha256Sync } from './sha2Hash';\nimport { hashRipemd160 } from './hashRipemd160';\n\n/**\n *\n * @param numberOfBytes\n *\n * @ignore\n */\nexport function getEntropy(arg: number): Buffer {\n  if (!arg) {\n    arg = 32;\n  }\n  return randomBytes(arg);\n}\n\n/**\n * @ignore\n */\nexport function makeECPrivateKey() {\n  const keyPair = ECPair.makeRandom({ rng: getEntropy });\n  return keyPair.privateKey!.toString('hex');\n}\n\n/**\n * @ignore\n */\nexport function publicKeyToAddress(publicKey: string | Buffer) {\n  const publicKeyBuffer = Buffer.isBuffer(publicKey) ? publicKey : Buffer.from(publicKey, 'hex');\n  const publicKeyHash160 = hashRipemd160(hashSha256Sync(publicKeyBuffer));\n  const result = address.toBase58Check(publicKeyHash160, networks.bitcoin.pubKeyHash);\n  return result;\n}\n\n/**\n * @ignore\n */\nexport function getPublicKeyFromPrivate(privateKey: string | Buffer) {\n  const privateKeyBuffer = Buffer.isBuffer(privateKey)\n    ? privateKey\n    : Buffer.from(privateKey, 'hex');\n  const keyPair = ECPair.fromPrivateKey(privateKeyBuffer);\n  return keyPair.publicKey.toString('hex');\n}\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function hexStringToECPair(skHex: string, network?: Network): ECPair.ECPairInterface {\n  const ecPairOptions = {\n    network: network || networks.bitcoin,\n    compressed: true,\n  };\n\n  if (skHex.length === 66) {\n    if (skHex.slice(64) !== '01') {\n      throw new Error(\n        'Improperly formatted private-key hex string. 66-length hex usually ' +\n          'indicates compressed key, but last byte must be == 1'\n      );\n    }\n    return ECPair.fromPrivateKey(Buffer.from(skHex.slice(0, 64), 'hex'), ecPairOptions);\n  } else if (skHex.length === 64) {\n    ecPairOptions.compressed = false;\n    return ECPair.fromPrivateKey(Buffer.from(skHex, 'hex'), ecPairOptions);\n  } else {\n    throw new Error('Improperly formatted private-key hex string: length should be 64 or 66.');\n  }\n}\n\n/**\n *\n * @ignore\n */\nexport function ecPairToHexString(secretKey: ECPair.ECPairInterface) {\n  const ecPointHex = secretKey.privateKey!.toString('hex');\n  if (secretKey.compressed) {\n    return `${ecPointHex}01`;\n  } else {\n    return ecPointHex;\n  }\n}\n\n/**\n * Creates a bitcoin address string from an ECPair\n * @private\n * @ignore\n */\nexport function ecPairToAddress(keyPair: ECPair.ECPairInterface) {\n  const sha256 = hashSha256Sync(keyPair.publicKey);\n  const hash160 = hashRipemd160(sha256);\n  return address.toBase58Check(hash160, keyPair.network.pubKeyHash);\n}\n","import { getCryptoLib } from './cryptoUtils';\n\nexport interface Hmac {\n  digest(key: Buffer, data: Buffer): Promise<Buffer>;\n}\n\ntype NodeCryptoCreateHmac = typeof import('crypto').createHmac;\n\nexport class NodeCryptoHmacSha256 implements Hmac {\n  createHmac: NodeCryptoCreateHmac;\n\n  constructor(createHmac: NodeCryptoCreateHmac) {\n    this.createHmac = createHmac;\n  }\n\n  async digest(key: Buffer, data: Buffer): Promise<Buffer> {\n    const result = this.createHmac('sha256', key)\n      .update(data)\n      .digest();\n    return Promise.resolve(result);\n  }\n}\n\nexport class WebCryptoHmacSha256 implements Hmac {\n  subtleCrypto: SubtleCrypto;\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto;\n  }\n\n  async digest(key: Buffer, data: Buffer): Promise<Buffer> {\n    const cryptoKey = await this.subtleCrypto.importKey(\n      'raw',\n      key,\n      { name: 'HMAC', hash: 'SHA-256' },\n      true,\n      ['sign']\n    );\n    const sig = await this.subtleCrypto.sign(\n      // The `hash` is only specified for non-compliant browsers like Edge.\n      { name: 'HMAC', hash: 'SHA-256' },\n      cryptoKey,\n      data\n    );\n    return Buffer.from(sig);\n  }\n}\n\nexport async function createHmacSha256(): Promise<Hmac> {\n  const cryptoLib = await getCryptoLib();\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoHmacSha256(cryptoLib.lib);\n  } else {\n    return new NodeCryptoHmacSha256(cryptoLib.lib.createHmac);\n  }\n}\n","import { getCryptoLib } from './cryptoUtils';\n\ntype NodeCryptoCreateCipher = typeof import('crypto').createCipheriv;\ntype NodeCryptoCreateDecipher = typeof import('crypto').createDecipheriv;\n\nexport type CipherAlgorithm = 'aes-256-cbc' | 'aes-128-cbc';\n\nexport interface AesCipher {\n  encrypt(algorithm: CipherAlgorithm, key: Buffer, iv: Buffer, data: Buffer): Promise<Buffer>;\n\n  decrypt(algorithm: CipherAlgorithm, key: Buffer, iv: Buffer, data: Buffer): Promise<Buffer>;\n}\n\nexport class NodeCryptoAesCipher implements AesCipher {\n  createCipher: NodeCryptoCreateCipher;\n\n  createDecipher: NodeCryptoCreateDecipher;\n\n  constructor(createCipher: NodeCryptoCreateCipher, createDecipher: NodeCryptoCreateDecipher) {\n    this.createCipher = createCipher;\n    this.createDecipher = createDecipher;\n  }\n\n  async encrypt(\n    algorithm: CipherAlgorithm,\n    key: Buffer,\n    iv: Buffer,\n    data: Buffer\n  ): Promise<Buffer> {\n    if (algorithm !== 'aes-128-cbc' && algorithm !== 'aes-256-cbc') {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n    }\n    const cipher = this.createCipher(algorithm, key, iv);\n    const result = Buffer.concat([cipher.update(data), cipher.final()]);\n    return Promise.resolve(result);\n  }\n\n  async decrypt(\n    algorithm: CipherAlgorithm,\n    key: Buffer,\n    iv: Buffer,\n    data: Buffer\n  ): Promise<Buffer> {\n    if (algorithm !== 'aes-128-cbc' && algorithm !== 'aes-256-cbc') {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n    }\n    const cipher = this.createDecipher(algorithm, key, iv);\n    const result = Buffer.concat([cipher.update(data), cipher.final()]);\n    return Promise.resolve(result);\n  }\n}\n\nexport class WebCryptoAesCipher implements AesCipher {\n  subtleCrypto: SubtleCrypto;\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto;\n  }\n\n  async encrypt(\n    algorithm: CipherAlgorithm,\n    key: Buffer,\n    iv: Buffer,\n    data: Buffer\n  ): Promise<Buffer> {\n    let algo: string;\n    let length: number;\n    if (algorithm === 'aes-128-cbc') {\n      algo = 'AES-CBC';\n      length = 128;\n    } else if (algorithm === 'aes-256-cbc') {\n      algo = 'AES-CBC';\n      length = 256;\n    } else {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n    }\n    const cryptoKey = await this.subtleCrypto.importKey('raw', key, { name: algo, length }, false, [\n      'encrypt',\n    ]);\n    const result = await this.subtleCrypto.encrypt({ name: algo, iv }, cryptoKey, data);\n    return Buffer.from(result);\n  }\n\n  async decrypt(\n    algorithm: CipherAlgorithm,\n    key: Buffer,\n    iv: Buffer,\n    data: Buffer\n  ): Promise<Buffer> {\n    let algo: string;\n    let length: number;\n    if (algorithm === 'aes-128-cbc') {\n      algo = 'AES-CBC';\n      length = 128;\n    } else if (algorithm === 'aes-256-cbc') {\n      algo = 'AES-CBC';\n      length = 256;\n    } else {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`);\n    }\n    const cryptoKey = await this.subtleCrypto.importKey('raw', key, { name: algo, length }, false, [\n      'decrypt',\n    ]);\n    const result = await this.subtleCrypto.decrypt({ name: algo, iv }, cryptoKey, data);\n    return Buffer.from(result);\n  }\n}\n\nexport async function createCipher(): Promise<AesCipher> {\n  const cryptoLib = await getCryptoLib();\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoAesCipher(cryptoLib.lib);\n  } else {\n    return new NodeCryptoAesCipher(cryptoLib.lib.createCipheriv, cryptoLib.lib.createDecipheriv);\n  }\n}\n","/**\n * Calculate the AES-CBC ciphertext output byte length a given input length.\n * AES has a fixed block size of 16-bytes regardless key size.\n * @ignore\n */\nexport function getAesCbcOutputLength(inputByteLength: number) {\n  // AES-CBC block mode rounds up to the next block size.\n  const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\n  return cipherTextLength;\n}\n\n/**\n * Calculate the base64 encoded string length for a given input length.\n * This is equivalent to the byte length when the string is ASCII or UTF8-8\n * encoded.\n * @param number\n */\nexport function getBase64OutputLength(inputByteLength: number) {\n  const encodedLength = Math.ceil(inputByteLength / 3) * 4;\n  return encodedLength;\n}\n\n/**\n *\n * @ignore\n */\nexport function hashCode(string: string) {\n  let hash = 0;\n  if (string.length === 0) return hash;\n  for (let i = 0; i < string.length; i++) {\n    const character = string.charCodeAt(i);\n    hash = (hash << 5) - hash + character;\n    hash &= hash;\n  }\n  return hash & 0x7fffffff;\n}\n","import { ec as EllipticCurve } from 'elliptic';\nimport * as BN from 'bn.js';\nimport { randomBytes } from './cryptoRandom';\nimport { FailedDecryptionError } from '@stacks/common';\nimport { getPublicKeyFromPrivate } from './keys';\nimport { hashSha256Sync, hashSha512Sync } from './sha2Hash';\nimport { createHmacSha256 } from './hmacSha256';\nimport { createCipher } from './aesCipher';\nimport { getAesCbcOutputLength, getBase64OutputLength } from './utils';\n\nconst ecurve = new EllipticCurve('secp256k1');\n\n/**\n * Controls how the encrypted data buffer will be encoded as a string in the JSON payload.\n * Options:\n *    `hex` -- the legacy default, file size increase 100% (2x).\n *    `base64` -- file size increased ~33%.\n * @ignore\n */\nexport type CipherTextEncoding = 'hex' | 'base64';\n\n/**\n * @ignore\n */\nexport type CipherObject = {\n  iv: string;\n  ephemeralPK: string;\n  cipherText: string;\n  /** If undefined then hex encoding is used for the `cipherText` string. */\n  cipherTextEncoding?: CipherTextEncoding;\n  mac: string;\n  wasString: boolean;\n};\n\n/**\n * @ignore\n */\nexport type SignedCipherObject = {\n  /** Hex encoded DER signature (up to 144 chars) */\n  signature: string;\n  /** Hex encoded public key (66 char length) */\n  publicKey: string;\n  /** The stringified json of a `CipherObject` */\n  cipherText: string;\n};\n\n/**\n * @ignore\n */\nexport async function aes256CbcEncrypt(\n  iv: Buffer,\n  key: Buffer,\n  plaintext: Buffer\n): Promise<Buffer> {\n  const cipher = await createCipher();\n  const result = await cipher.encrypt('aes-256-cbc', key, iv, plaintext);\n  return result;\n}\n\n/**\n * @ignore\n */\nasync function aes256CbcDecrypt(iv: Buffer, key: Buffer, ciphertext: Buffer): Promise<Buffer> {\n  const cipher = await createCipher();\n  const result = await cipher.decrypt('aes-256-cbc', key, iv, ciphertext);\n  return result;\n}\n\n/**\n * @ignore\n */\nasync function hmacSha256(key: Buffer, content: Buffer) {\n  const hmacSha256 = await createHmacSha256();\n  return hmacSha256.digest(key, content);\n}\n\n/**\n * @ignore\n */\nfunction equalConstTime(b1: Buffer, b2: Buffer) {\n  if (b1.length !== b2.length) {\n    return false;\n  }\n  let res = 0;\n  for (let i = 0; i < b1.length; i++) {\n    res |= b1[i] ^ b2[i]; // jshint ignore:line\n  }\n  return res === 0;\n}\n\n/**\n * @ignore\n */\nfunction sharedSecretToKeys(sharedSecret: Buffer): { encryptionKey: Buffer; hmacKey: Buffer } {\n  // generate mac and encryption key from shared secret\n  const hashedSecret = hashSha512Sync(sharedSecret);\n  return {\n    encryptionKey: hashedSecret.slice(0, 32),\n    hmacKey: hashedSecret.slice(32),\n  };\n}\n\n/**\n * Hex encodes a 32-byte BN.js instance.\n * The result string is zero padded and always 64 characters in length.\n * @ignore\n */\nexport function getHexFromBN(bnInput: BN): string {\n  const hexOut = bnInput.toString('hex', 64);\n  if (hexOut.length === 64) {\n    return hexOut;\n  } else if (hexOut.length < 64) {\n    // pad with leading zeros\n    // the padStart function would require node 9\n    const padding = '0'.repeat(64 - hexOut.length);\n    return `${padding}${hexOut}`;\n  } else {\n    throw new Error('Generated a > 32-byte BN for encryption. Failing.');\n  }\n}\n\n/**\n * Returns a big-endian encoded 32-byte BN.js instance.\n * The result Buffer is zero padded and always 32 bytes in length.\n * @ignore\n */\nexport function getBufferFromBN(bnInput: BN): Buffer {\n  const result = bnInput.toArrayLike(Buffer, 'be', 32);\n  if (result.byteLength !== 32) {\n    throw new Error('Generated a 32-byte BN for encryption. Failing.');\n  }\n  return result;\n}\n\n/**\n * Get details about the JSON envelope size overhead for ciphertext payloads.\n * @ignore\n */\nexport function getCipherObjectWrapper(opts: {\n  wasString: boolean;\n  cipherTextEncoding: CipherTextEncoding;\n}): {\n  /** The stringified JSON string of an empty `CipherObject`. */\n  payloadShell: string;\n  /** Total string length of all the `CipherObject` values that always have constant lengths. */\n  payloadValuesLength: number;\n} {\n  // Placeholder structure of the ciphertext payload, used to determine the\n  // stringified JSON overhead length.\n  const shell: CipherObject = {\n    iv: '',\n    ephemeralPK: '',\n    mac: '',\n    cipherText: '',\n    wasString: !!opts.wasString,\n  };\n  if (opts.cipherTextEncoding === 'base64') {\n    shell.cipherTextEncoding = 'base64';\n  }\n  // Hex encoded 16 byte buffer.\n  const ivLength = 32;\n  // Hex encoded, compressed EC pubkey of 33 bytes.\n  const ephemeralPKLength = 66;\n  // Hex encoded 32 byte hmac-sha256.\n  const macLength = 64;\n  return {\n    payloadValuesLength: ivLength + ephemeralPKLength + macLength,\n    payloadShell: JSON.stringify(shell),\n  };\n}\n\n/**\n * Get details about the JSON envelope size overhead for signed ciphertext payloads.\n * @param payloadShell - The JSON stringified empty `CipherObject`\n * @ignore\n */\nexport function getSignedCipherObjectWrapper(\n  payloadShell: string\n): {\n  /** The stringified JSON string of an empty `SignedCipherObject`. */\n  signedPayloadValuesLength: number;\n  /** Total string length of all the `SignedCipherObject` values\n   * that always have constant lengths */\n  signedPayloadShell: string;\n} {\n  // Placeholder structure of the signed ciphertext payload, used to determine the\n  // stringified JSON overhead length.\n  const shell: SignedCipherObject = {\n    signature: '',\n    publicKey: '',\n    cipherText: payloadShell,\n  };\n  // Hex encoded DER signature, up to 72 byte length.\n  const signatureLength = 144;\n  // Hex encoded 33 byte public key.\n  const publicKeyLength = 66;\n  return {\n    signedPayloadValuesLength: signatureLength + publicKeyLength,\n    signedPayloadShell: JSON.stringify(shell),\n  };\n}\n\n/**\n * Fast function that determines the final ASCII string byte length of the\n * JSON stringified ECIES encrypted payload.\n * @ignore\n */\nexport function eciesGetJsonStringLength(opts: {\n  contentLength: number;\n  wasString: boolean;\n  sign: boolean;\n  cipherTextEncoding: CipherTextEncoding;\n}): number {\n  const { payloadShell, payloadValuesLength } = getCipherObjectWrapper(opts);\n\n  // Calculate the AES output length given the input length.\n  const cipherTextLength = getAesCbcOutputLength(opts.contentLength);\n\n  // Get the encoded string length of the cipherText.\n  let encodedCipherTextLength: number;\n  if (!opts.cipherTextEncoding || opts.cipherTextEncoding === 'hex') {\n    encodedCipherTextLength = cipherTextLength * 2;\n  } else if (opts.cipherTextEncoding === 'base64') {\n    encodedCipherTextLength = getBase64OutputLength(cipherTextLength);\n  } else {\n    throw new Error(`Unexpected cipherTextEncoding \"${opts.cipherTextEncoding}\"`);\n  }\n\n  if (!opts.sign) {\n    // Add the length of the JSON envelope, ciphertext length, and length of const values.\n    return payloadShell.length + payloadValuesLength + encodedCipherTextLength;\n  } else {\n    // Get the signed version of the JSON envelope\n    const { signedPayloadShell, signedPayloadValuesLength } = getSignedCipherObjectWrapper(\n      payloadShell\n    );\n    // Add length of the JSON envelope, ciphertext length, and length of the const values.\n    return (\n      signedPayloadShell.length +\n      signedPayloadValuesLength +\n      payloadValuesLength +\n      encodedCipherTextLength\n    );\n  }\n}\n\n/**\n * Encrypt content to elliptic curve publicKey using ECIES\n * @param publicKey - secp256k1 public key hex string\n * @param content - content to encrypt\n * @return Object containing:\n *  iv (initialization vector, hex encoding),\n *  cipherText (cipher text either hex or base64 encoded),\n *  mac (message authentication code, hex encoded),\n *  ephemeral public key (hex encoded),\n *  wasString (boolean indicating with or not to return a buffer or string on decrypt)\n * @private\n * @ignore\n */\nexport async function encryptECIES(\n  publicKey: string,\n  content: Buffer,\n  wasString: boolean,\n  cipherTextEncoding?: CipherTextEncoding\n): Promise<CipherObject> {\n  const ecPK = ecurve.keyFromPublic(publicKey, 'hex').getPublic();\n  const ephemeralSK = ecurve.genKeyPair();\n  const ephemeralPK = Buffer.from(ephemeralSK.getPublic().encodeCompressed());\n  const sharedSecret = ephemeralSK.derive(ecPK) as BN;\n  const sharedSecretBuffer = getBufferFromBN(sharedSecret);\n  const sharedKeys = sharedSecretToKeys(sharedSecretBuffer);\n\n  const initializationVector = randomBytes(16);\n\n  const cipherText = await aes256CbcEncrypt(\n    initializationVector,\n    sharedKeys.encryptionKey,\n    content\n  );\n\n  const macData = Buffer.concat([initializationVector, ephemeralPK, cipherText]);\n  const mac = await hmacSha256(sharedKeys.hmacKey, macData);\n\n  let cipherTextString: string;\n  if (!cipherTextEncoding || cipherTextEncoding === 'hex') {\n    cipherTextString = cipherText.toString('hex');\n  } else if (cipherTextEncoding === 'base64') {\n    cipherTextString = cipherText.toString('base64');\n  } else {\n    throw new Error(`Unexpected cipherTextEncoding \"${cipherTextEncoding}\"`);\n  }\n\n  const result: CipherObject = {\n    iv: initializationVector.toString('hex'),\n    ephemeralPK: ephemeralPK.toString('hex'),\n    cipherText: cipherTextString,\n    mac: mac.toString('hex'),\n    wasString: !!wasString,\n  };\n  if (cipherTextEncoding && cipherTextEncoding !== 'hex') {\n    result.cipherTextEncoding = cipherTextEncoding;\n  }\n  return result;\n}\n\n/**\n * Decrypt content encrypted using ECIES\n * @param {String} privateKey - secp256k1 private key hex string\n * @param {Object} cipherObject - object to decrypt, should contain:\n *  iv (initialization vector), cipherText (cipher text),\n *  mac (message authentication code), ephemeralPublicKey\n *  wasString (boolean indicating with or not to return a buffer or string on decrypt)\n * @return {Buffer} plaintext\n * @throws {FailedDecryptionError} if unable to decrypt\n * @private\n * @ignore\n */\nexport async function decryptECIES(\n  privateKey: string,\n  cipherObject: CipherObject\n): Promise<Buffer | string> {\n  const ecSK = ecurve.keyFromPrivate(privateKey, 'hex');\n  let ephemeralPK = null;\n  try {\n    ephemeralPK = ecurve.keyFromPublic(cipherObject.ephemeralPK, 'hex').getPublic();\n  } catch (error) {\n    throw new FailedDecryptionError(\n      'Unable to get public key from cipher object. ' +\n        'You might be trying to decrypt an unencrypted object.'\n    );\n  }\n\n  const sharedSecret = ecSK.derive(ephemeralPK) as BN;\n  const sharedSecretBuffer = getBufferFromBN(sharedSecret);\n\n  const sharedKeys = sharedSecretToKeys(sharedSecretBuffer);\n\n  const ivBuffer = Buffer.from(cipherObject.iv, 'hex');\n  let cipherTextBuffer: Buffer;\n\n  if (!cipherObject.cipherTextEncoding || cipherObject.cipherTextEncoding === 'hex') {\n    cipherTextBuffer = Buffer.from(cipherObject.cipherText, 'hex');\n  } else if (cipherObject.cipherTextEncoding === 'base64') {\n    cipherTextBuffer = Buffer.from(cipherObject.cipherText, 'base64');\n  } else {\n    throw new Error(`Unexpected cipherTextEncoding \"${cipherObject.cipherText}\"`);\n  }\n\n  const macData = Buffer.concat([\n    ivBuffer,\n    Buffer.from(ephemeralPK.encodeCompressed()),\n    cipherTextBuffer,\n  ]);\n  const actualMac = await hmacSha256(sharedKeys.hmacKey, macData);\n  const expectedMac = Buffer.from(cipherObject.mac, 'hex');\n  if (!equalConstTime(expectedMac, actualMac)) {\n    throw new FailedDecryptionError('Decryption failed: failure in MAC check');\n  }\n  const plainText = await aes256CbcDecrypt(ivBuffer, sharedKeys.encryptionKey, cipherTextBuffer);\n\n  if (cipherObject.wasString) {\n    return plainText.toString();\n  } else {\n    return plainText;\n  }\n}\n\n/**\n * Sign content using ECDSA\n *\n * @param {String} privateKey - secp256k1 private key hex string\n * @param {Object} content - content to sign\n * @return {Object} contains:\n * signature - Hex encoded DER signature\n * public key - Hex encoded private string taken from privateKey\n * @private\n * @ignore\n */\nexport function signECDSA(\n  privateKey: string,\n  content: string | Buffer\n): {\n  publicKey: string;\n  signature: string;\n} {\n  const contentBuffer = content instanceof Buffer ? content : Buffer.from(content);\n  const ecPrivate = ecurve.keyFromPrivate(privateKey, 'hex');\n  const publicKey = getPublicKeyFromPrivate(privateKey);\n  const contentHash = hashSha256Sync(contentBuffer);\n  const signature = ecPrivate.sign(contentHash);\n  const signatureString: string = signature.toDER('hex');\n  return {\n    signature: signatureString,\n    publicKey,\n  };\n}\n\n/**\n * @ignore\n */\nfunction getBuffer(content: string | ArrayBuffer | Buffer) {\n  if (content instanceof Buffer) return content;\n  else if (content instanceof ArrayBuffer) return Buffer.from(content);\n  else return Buffer.from(content);\n}\n\n/**\n * Verify content using ECDSA\n * @param {String | Buffer} content - Content to verify was signed\n * @param {String} publicKey - secp256k1 private key hex string\n * @param {String} signature - Hex encoded DER signature\n * @return {Boolean} returns true when signature matches publickey + content, false if not\n * @private\n * @ignore\n */\nexport function verifyECDSA(\n  content: string | ArrayBuffer | Buffer,\n  publicKey: string,\n  signature: string\n): boolean {\n  const contentBuffer = getBuffer(content);\n  const ecPublic = ecurve.keyFromPublic(publicKey, 'hex');\n  const contentHash = hashSha256Sync(contentBuffer);\n\n  return ecPublic.verify(contentHash, <any>signature);\n}\n","import { getCryptoLib } from './cryptoUtils';\n\nexport type Pbkdf2Digests = 'sha512' | 'sha256';\n\nexport interface Pbkdf2 {\n  derive(\n    password: string,\n    salt: Buffer,\n    iterations: number,\n    keyLength: number,\n    digest: Pbkdf2Digests\n  ): Promise<Buffer>;\n}\n\ntype NodePbkdf2Fn = typeof import('crypto').pbkdf2;\n\nexport class NodeCryptoPbkdf2 implements Pbkdf2 {\n  nodePbkdf2: NodePbkdf2Fn;\n\n  constructor(nodePbkdf2: NodePbkdf2Fn) {\n    this.nodePbkdf2 = nodePbkdf2;\n  }\n\n  async derive(\n    password: string,\n    salt: Buffer,\n    iterations: number,\n    keyLength: number,\n    digest: Pbkdf2Digests\n  ): Promise<Buffer> {\n    if (digest !== 'sha512' && digest !== 'sha256') {\n      throw new Error(`Unsupported digest \"${digest}\" for Pbkdf2`);\n    }\n    return new Promise((resolve, reject) => {\n      this.nodePbkdf2(password, salt, iterations, keyLength, digest, (error, result) => {\n        if (error) {\n          reject(error);\n        }\n        resolve(result);\n      });\n    });\n  }\n}\n\nexport class WebCryptoPbkdf2 implements Pbkdf2 {\n  subtleCrypto: SubtleCrypto;\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto;\n  }\n\n  async derive(\n    password: string,\n    salt: Buffer,\n    iterations: number,\n    keyLength: number,\n    digest: Pbkdf2Digests\n  ): Promise<Buffer> {\n    let algo: string;\n    if (digest === 'sha256') {\n      algo = 'SHA-256';\n    } else if (digest === 'sha512') {\n      algo = 'SHA-512';\n    } else {\n      throw new Error(`Unsupported Pbkdf2 digest algorithm \"${digest}\"`);\n    }\n    let result: ArrayBuffer;\n    const passwordBytes = Buffer.from(password, 'utf8');\n    try {\n      const key = await this.subtleCrypto.importKey('raw', passwordBytes, 'PBKDF2', false, [\n        'deriveBits',\n      ]);\n      result = await this.subtleCrypto.deriveBits(\n        {\n          name: 'PBKDF2',\n          salt,\n          iterations,\n          hash: { name: algo },\n        },\n        key,\n        keyLength * 8\n      );\n    } catch (error) {\n      // Browser appears to support WebCrypto but missing pbkdf2 support.\n      const partialWebCrypto = new WebCryptoPartialPbkdf2(this.subtleCrypto);\n      return partialWebCrypto.derive(password, salt, iterations, keyLength, digest);\n    }\n    return Buffer.from(result);\n  }\n}\n\nexport class WebCryptoPartialPbkdf2 implements Pbkdf2 {\n  // An async implementation for browsers that support WebCrypto hmac\n  // but not pbkdf2. Extracted from crypto-browserify/pbkdf2 and modified to\n  // use WebCrypto for hmac operations.\n  // Original: https://github.com/crypto-browserify/pbkdf2/tree/v3.0.17/lib\n\n  subtleCrypto: SubtleCrypto;\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto;\n  }\n\n  async derive(\n    password: string,\n    salt: Buffer,\n    iterations: number,\n    keyLength: number,\n    digest: Pbkdf2Digests\n  ): Promise<Buffer> {\n    if (digest !== 'sha512' && digest !== 'sha256') {\n      throw new Error(`Unsupported digest \"${digest}\" for Pbkdf2`);\n    }\n    const key = Buffer.from(password, 'utf8');\n    const algo = digest === 'sha512' ? 'SHA-512' : 'SHA-256';\n    const algoOpts = { name: 'HMAC', hash: algo };\n    const hmacDigest = (key: ArrayBuffer, data: ArrayBuffer) =>\n      this.subtleCrypto\n        .importKey('raw', key, algoOpts, true, ['sign'])\n        .then(cryptoKey => this.subtleCrypto.sign(algoOpts, cryptoKey, data))\n        .then(result => new Uint8Array(result));\n\n    const DK = new Uint8Array(keyLength);\n    const saltLength = salt.length;\n    const block1 = new Uint8Array(saltLength + 4);\n    block1.set(salt);\n    let destPos = 0;\n    const hLen = digest === 'sha512' ? 64 : 32;\n    const l = Math.ceil(keyLength / hLen);\n\n    function writeUInt32BE(data: Uint8Array, value: number, offset: number) {\n      value = +value;\n      offset >>>= 0;\n      data[offset] = value >>> 24;\n      data[offset + 1] = value >>> 16;\n      data[offset + 2] = value >>> 8;\n      data[offset + 3] = value & 0xff;\n      return offset + 4;\n    }\n\n    for (let i = 1; i <= l; i++) {\n      writeUInt32BE(block1, i, saltLength);\n      // eslint-disable-next-line no-await-in-loop\n      const T = await hmacDigest(key, block1);\n      let U = T;\n      for (let j = 1; j < iterations; j++) {\n        // eslint-disable-next-line no-await-in-loop\n        U = await hmacDigest(key, U);\n        for (let k = 0; k < hLen; k++) {\n          T[k] ^= U[k];\n        }\n      }\n      DK.set(T.subarray(0, DK.byteLength - destPos), destPos);\n      destPos += hLen;\n    }\n    return Buffer.from(DK.buffer);\n  }\n}\n\nexport async function createPbkdf2(): Promise<Pbkdf2> {\n  const cryptoLib = await getCryptoLib();\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoPbkdf2(cryptoLib.lib);\n  } else {\n    return new NodeCryptoPbkdf2(cryptoLib.lib.pbkdf2);\n  }\n}\n","import { validateMnemonic, mnemonicToEntropy, entropyToMnemonic } from 'bip39';\nimport { randomBytes, GetRandomBytes } from './cryptoRandom';\nimport { createSha2Hash } from './sha2Hash';\nimport { createHmacSha256 } from './hmacSha256';\nimport { createCipher } from './aesCipher';\nimport { createPbkdf2 } from './pbkdf2';\nimport { TriplesecDecryptSignature } from './cryptoUtils';\n\n/**\n * Encrypt a raw mnemonic phrase to be password protected\n * @param {string} phrase - Raw mnemonic phrase\n * @param {string} password - Password to encrypt mnemonic with\n * @return {Promise<Buffer>} The encrypted phrase\n * @private\n * @ignore\n * */\nexport async function encryptMnemonic(\n  phrase: string,\n  password: string,\n  opts?: {\n    getRandomBytes?: GetRandomBytes;\n  }\n): Promise<Buffer> {\n  // hex encoded mnemonic string\n  let mnemonicEntropy: string;\n  try {\n    // must be bip39 mnemonic\n    mnemonicEntropy = mnemonicToEntropy(phrase);\n  } catch (error) {\n    console.error('Invalid mnemonic phrase provided');\n    console.error(error);\n    throw new Error('Not a valid bip39 mnemonic');\n  }\n\n  // normalize plaintext to fixed length byte string\n  const plaintextNormalized = Buffer.from(mnemonicEntropy, 'hex');\n\n  // AES-128-CBC with SHA256 HMAC\n  const pbkdf2 = await createPbkdf2();\n  let salt: Buffer;\n  if (opts && opts.getRandomBytes) {\n    salt = opts.getRandomBytes(16);\n  } else {\n    salt = randomBytes(16);\n  }\n  const keysAndIV = await pbkdf2.derive(password, salt, 100000, 48, 'sha512');\n  const encKey = keysAndIV.slice(0, 16);\n  const macKey = keysAndIV.slice(16, 32);\n  const iv = keysAndIV.slice(32, 48);\n\n  const cipher = await createCipher();\n  const cipherText = await cipher.encrypt('aes-128-cbc', encKey, iv, plaintextNormalized);\n\n  const hmacPayload = Buffer.concat([salt, cipherText]);\n  const hmacSha256 = await createHmacSha256();\n  const hmacDigest = await hmacSha256.digest(macKey, hmacPayload);\n\n  const payload = Buffer.concat([salt, hmacDigest, cipherText]);\n  return payload;\n}\n\n// Used to distinguish bad password during decrypt vs invalid format\nclass PasswordError extends Error {}\n\n/**\n * @ignore\n */\nasync function decryptMnemonicBuffer(dataBuffer: Buffer, password: string): Promise<string> {\n  const salt = dataBuffer.slice(0, 16);\n  const hmacSig = dataBuffer.slice(16, 48); // 32 bytes\n  const cipherText = dataBuffer.slice(48);\n  const hmacPayload = Buffer.concat([salt, cipherText]);\n\n  const pbkdf2 = await createPbkdf2();\n  const keysAndIV = await pbkdf2.derive(password, salt, 100000, 48, 'sha512');\n  const encKey = keysAndIV.slice(0, 16);\n  const macKey = keysAndIV.slice(16, 32);\n  const iv = keysAndIV.slice(32, 48);\n\n  const decipher = await createCipher();\n  const decryptedResult = await decipher.decrypt('aes-128-cbc', encKey, iv, cipherText);\n\n  const hmacSha256 = await createHmacSha256();\n  const hmacDigest = await hmacSha256.digest(macKey, hmacPayload);\n\n  // hash both hmacSig and hmacDigest so string comparison time\n  // is uncorrelated to the ciphertext\n  const sha2Hash = await createSha2Hash();\n  const hmacSigHash = await sha2Hash.digest(hmacSig);\n  const hmacDigestHash = await sha2Hash.digest(hmacDigest);\n\n  if (!hmacSigHash.equals(hmacDigestHash)) {\n    // not authentic\n    throw new PasswordError('Wrong password (HMAC mismatch)');\n  }\n\n  let mnemonic: string;\n  try {\n    mnemonic = entropyToMnemonic(decryptedResult);\n  } catch (error) {\n    console.error('Error thrown by `entropyToMnemonic`');\n    console.error(error);\n    throw new PasswordError('Wrong password (invalid plaintext)');\n  }\n  if (!validateMnemonic(mnemonic)) {\n    throw new PasswordError('Wrong password (invalid plaintext)');\n  }\n\n  return mnemonic;\n}\n\n/**\n * Decrypt legacy triplesec keys\n * @param {Buffer} dataBuffer - The encrypted key\n * @param {String} password - Password for data\n * @return {Promise<Buffer>} Decrypted seed\n * @private\n * @ignore\n */\nfunction decryptLegacy(\n  dataBuffer: Buffer,\n  password: string,\n  triplesecDecrypt?: TriplesecDecryptSignature\n): Promise<Buffer> {\n  return new Promise<Buffer>((resolve, reject) => {\n    if (!triplesecDecrypt) {\n      reject(new Error('The `triplesec.decrypt` function must be provided'));\n    }\n    triplesecDecrypt!(\n      {\n        key: Buffer.from(password),\n        data: dataBuffer,\n      },\n      (err, plaintextBuffer) => {\n        if (!err) {\n          resolve(plaintextBuffer!);\n        } else {\n          reject(err);\n        }\n      }\n    );\n  });\n}\n\n/**\n * Decrypt an encrypted mnemonic phrase with a password.\n * Legacy triplesec encrypted payloads are also supported.\n * @param data - Buffer or hex-encoded string of the encrypted mnemonic\n * @param password - Password for data\n * @return the raw mnemonic phrase\n * @private\n * @ignore\n */\nexport async function decryptMnemonic(\n  data: string | Buffer,\n  password: string,\n  triplesecDecrypt?: TriplesecDecryptSignature\n) {\n  const dataBuffer = Buffer.isBuffer(data) ? data : Buffer.from(data, 'hex');\n  try {\n    return await decryptMnemonicBuffer(dataBuffer, password);\n  } catch (err) {\n    if (err instanceof PasswordError) {\n      throw err;\n    }\n    const data = await decryptLegacy(dataBuffer, password, triplesecDecrypt);\n    return data.toString();\n  }\n}\n","import {\n  CipherTextEncoding,\n  SignedCipherObject,\n  encryptECIES,\n  decryptECIES,\n  signECDSA,\n} from './ec';\n\nimport { getPublicKeyFromPrivate } from './keys';\n\nexport interface EncryptionOptions {\n  /**\n   * If set to `true` the data is signed using ECDSA on SHA256 hashes with the user's\n   * app private key. If a string is specified, it is used as the private key instead\n   * of the user's app private key.\n   * @default false\n   */\n  sign?: boolean | string;\n  /**\n   * String encoding format for the cipherText buffer.\n   * Currently defaults to 'hex' for legacy backwards-compatibility.\n   * Only used if the `encrypt` option is also used.\n   * Note: in the future this should default to 'base64' for the significant\n   * file size reduction.\n   */\n  cipherTextEncoding?: CipherTextEncoding;\n  /**\n   * Specifies if the original unencrypted content is a ASCII or UTF-8 string.\n   * For example stringified JSON.\n   * If true, then when the ciphertext is decrypted, it will be returned as\n   * a `string` type variable, otherwise will be returned as a Buffer.\n   */\n  wasString?: boolean;\n}\n\n/**\n * Specify encryption options, and whether to sign the ciphertext.\n */\nexport interface EncryptContentOptions extends EncryptionOptions {\n  /**\n   * Encrypt the data with this key.\n   */\n  publicKey?: string;\n  /**\n   * Encrypt the data with the public key corresponding to the supplied private key\n   */\n  privateKey?: string;\n}\n\n/**\n * Encrypts the data provided with the app public key.\n * @param {String|Buffer} content - data to encrypt\n * @param {Object} [options=null] - options object\n * @param {String} options.publicKey - the hex string of the ECDSA public\n * key to use for encryption. If not provided, will use user's appPublicKey.\n * @return {String} Stringified ciphertext object\n */\nexport async function encryptContent(\n  content: string | Buffer,\n  options?: EncryptContentOptions\n): Promise<string> {\n  const opts = Object.assign({}, options);\n  let privateKey: string | undefined;\n  if (!opts.publicKey) {\n    if (!opts.privateKey) {\n      throw new Error('Either public key or private key must be supplied for encryption.');\n    }\n    opts.publicKey = getPublicKeyFromPrivate(opts.privateKey);\n  }\n  let wasString: boolean;\n  if (typeof opts.wasString === 'boolean') {\n    wasString = opts.wasString;\n  } else {\n    wasString = typeof content === 'string';\n  }\n  const contentBuffer = typeof content === 'string' ? Buffer.from(content) : content;\n  const cipherObject = await encryptECIES(\n    opts.publicKey,\n    contentBuffer,\n    wasString,\n    opts.cipherTextEncoding\n  );\n  let cipherPayload = JSON.stringify(cipherObject);\n  if (opts.sign) {\n    if (typeof opts.sign === 'string') {\n      privateKey = opts.sign;\n    } else if (!privateKey) {\n      privateKey = opts.privateKey;\n    }\n    const signatureObject = signECDSA(privateKey!, cipherPayload);\n    const signedCipherObject: SignedCipherObject = {\n      signature: signatureObject.signature,\n      publicKey: signatureObject.publicKey,\n      cipherText: cipherPayload,\n    };\n    cipherPayload = JSON.stringify(signedCipherObject);\n  }\n  return cipherPayload;\n}\n\n/**\n * Decrypts data encrypted with `encryptContent` with the\n * transit private key.\n * @param {String|Buffer} content - encrypted content.\n * @param {Object} [options=null] - options object\n * @param {String} options.privateKey - the hex string of the ECDSA private\n * key to use for decryption. If not provided, will use user's appPrivateKey.\n * @return {String|Buffer} decrypted content.\n */\nexport function decryptContent(\n  content: string,\n  options?: {\n    privateKey?: string;\n  }\n): Promise<string | Buffer> {\n  const opts = Object.assign({}, options);\n  if (!opts.privateKey) {\n    throw new Error('Private key is required for decryption.');\n  }\n\n  try {\n    const cipherObject = JSON.parse(content);\n    return decryptECIES(opts.privateKey, cipherObject);\n  } catch (err) {\n    if (err instanceof SyntaxError) {\n      throw new Error(\n        'Failed to parse encrypted content JSON. The content may not ' +\n          'be encrypted. If using getFile, try passing { decrypt: false }.'\n      );\n    } else {\n      throw err;\n    }\n  }\n}\n"],"names":["runtime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","undefined","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","fn","arg","type","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","constructor","displayName","defineIteratorMethods","forEach","method","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","then","unwrapped","error","previousPromise","enqueue","callInvokeWithMethodAndArg","async","Promise","iter","next","done","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","info","resultName","nextLoc","toString","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","keys","object","reverse","length","pop","iterable","iteratorMethod","isNaN","i","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","isSubtleCryptoAvailable","crypto","subtle","isNodeCryptoAvailable","withFeature","resolvedResult","require","cryptoModule","features","NO_CRYPTO_LIB","getCryptoLib","lib","nodeCrypto","NodeCryptoSha2Hash","createHash","digest","data","algorithm","update","console","log","hashSha256Sync","hashSha512Sync","WebCryptoSha2Hash","subtleCrypto","algo","hash","Buffer","from","createSha2Hash","cryptoLib","sha256","sha512","Ripemd160PolyfillDigest","instance","Ripemd160Polyfill","Array","isArray","buffer","NodeCryptoRipemd160Digest","nodeCryptoCreateHash","_err","polyfill","createHashRipemd160","hashRipemd160","getEntropy","randomBytes","makeECPrivateKey","keyPair","ECPair","makeRandom","rng","privateKey","publicKeyToAddress","publicKey","publicKeyBuffer","isBuffer","publicKeyHash160","address","toBase58Check","networks","bitcoin","pubKeyHash","getPublicKeyFromPrivate","privateKeyBuffer","fromPrivateKey","hexStringToECPair","skHex","network","ecPairOptions","compressed","ecPairToHexString","secretKey","ecPointHex","ecPairToAddress","hash160","NodeCryptoHmacSha256","createHmac","WebCryptoHmacSha256","importKey","cryptoKey","sign","sig","createHmacSha256","NodeCryptoAesCipher","createCipher","createDecipher","encrypt","iv","cipher","concat","decrypt","WebCryptoAesCipher","createCipheriv","createDecipheriv","getAesCbcOutputLength","inputByteLength","cipherTextLength","Math","floor","getBase64OutputLength","encodedLength","ceil","hashCode","string","character","charCodeAt","ecurve","EllipticCurve","aes256CbcEncrypt","plaintext","aes256CbcDecrypt","ciphertext","hmacSha256","content","equalConstTime","b1","b2","res","sharedSecretToKeys","sharedSecret","hashedSecret","encryptionKey","hmacKey","getHexFromBN","bnInput","hexOut","padding","repeat","getBufferFromBN","toArrayLike","byteLength","getCipherObjectWrapper","opts","shell","ephemeralPK","mac","cipherText","wasString","cipherTextEncoding","ivLength","ephemeralPKLength","macLength","payloadValuesLength","payloadShell","JSON","stringify","getSignedCipherObjectWrapper","signature","signatureLength","publicKeyLength","signedPayloadValuesLength","signedPayloadShell","eciesGetJsonStringLength","contentLength","encodedCipherTextLength","encryptECIES","ecPK","keyFromPublic","getPublic","ephemeralSK","genKeyPair","encodeCompressed","derive","sharedSecretBuffer","sharedKeys","initializationVector","macData","cipherTextString","decryptECIES","cipherObject","ecSK","keyFromPrivate","FailedDecryptionError","ivBuffer","cipherTextBuffer","actualMac","expectedMac","plainText","signECDSA","contentBuffer","ecPrivate","contentHash","signatureString","toDER","getBuffer","ArrayBuffer","verifyECDSA","ecPublic","verify","NodeCryptoPbkdf2","nodePbkdf2","password","salt","iterations","keyLength","WebCryptoPbkdf2","passwordBytes","deriveBits","partialWebCrypto","WebCryptoPartialPbkdf2","writeUInt32BE","offset","algoOpts","hmacDigest","Uint8Array","DK","saltLength","block1","set","destPos","hLen","l","T","U","j","k","subarray","createPbkdf2","pbkdf2","encryptMnemonic","phrase","mnemonicEntropy","mnemonicToEntropy","plaintextNormalized","getRandomBytes","keysAndIV","encKey","macKey","hmacPayload","payload","PasswordError","decryptMnemonicBuffer","dataBuffer","hmacSig","decipher","decryptedResult","sha2Hash","hmacSigHash","hmacDigestHash","equals","mnemonic","entropyToMnemonic","validateMnemonic","decryptLegacy","triplesecDecrypt","plaintextBuffer","decryptMnemonic","encryptContent","options","assign","cipherPayload","signatureObject","signedCipherObject","decryptContent","parse","SyntaxError"],"mappings":"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"}