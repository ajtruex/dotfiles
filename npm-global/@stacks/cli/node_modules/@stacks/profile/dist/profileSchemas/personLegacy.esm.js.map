{"version":3,"file":"personLegacy.esm.js","sources":["../../src/profileSchemas/personLegacy.ts"],"sourcesContent":["/**\n *\n * @param serviceName\n * @param data\n *\n * @ignore\n */\nfunction formatAccount(serviceName: string, data: any) {\n  let proofUrl;\n  if (data.proof && data.proof.url) {\n    proofUrl = data.proof.url;\n  }\n  return {\n    '@type': 'Account',\n    service: serviceName,\n    identifier: data.username,\n    proofType: 'http',\n    proofUrl,\n  };\n}\n\n/**\n *\n * @param profile\n *\n * @ignore\n */\nexport function getPersonFromLegacyFormat(profile: any) {\n  const profileData: {\n    ['@type']: string;\n    account?: any[];\n    name?: string;\n    description?: string;\n    address?: {\n      ['@type']: string;\n      addressLocality: string;\n    };\n    image?: any[];\n    website?: Array<{\n      ['@type']: string;\n      url: string;\n    }>;\n  } = {\n    '@type': 'Person',\n  };\n\n  if (profile) {\n    if (profile.name && profile.name.formatted) {\n      profileData.name = profile.name.formatted;\n    }\n\n    if (profile.bio) {\n      profileData.description = profile.bio;\n    }\n\n    if (profile.location && profile.location.formatted) {\n      profileData.address = {\n        '@type': 'PostalAddress',\n        addressLocality: profile.location.formatted,\n      };\n    }\n\n    const images = [];\n    if (profile.avatar && profile.avatar.url) {\n      images.push({\n        '@type': 'ImageObject',\n        name: 'avatar',\n        contentUrl: profile.avatar.url,\n      });\n    }\n    if (profile.cover && profile.cover.url) {\n      images.push({\n        '@type': 'ImageObject',\n        name: 'cover',\n        contentUrl: profile.cover.url,\n      });\n    }\n    if (images.length) {\n      profileData.image = images;\n    }\n\n    if (profile.website) {\n      profileData.website = [\n        {\n          '@type': 'WebSite',\n          url: profile.website,\n        },\n      ];\n    }\n\n    const accounts = [];\n    if (profile.bitcoin && profile.bitcoin.address) {\n      accounts.push({\n        '@type': 'Account',\n        role: 'payment',\n        service: 'bitcoin',\n        identifier: profile.bitcoin.address,\n      });\n    }\n    if (profile.twitter && profile.twitter.username) {\n      accounts.push(formatAccount('twitter', profile.twitter));\n    }\n    if (profile.facebook && profile.facebook.username) {\n      accounts.push(formatAccount('facebook', profile.facebook));\n    }\n    if (profile.github && profile.github.username) {\n      accounts.push(formatAccount('github', profile.github));\n    }\n\n    if (profile.auth) {\n      if (profile.auth.length > 0) {\n        if (profile.auth[0] && profile.auth[0].publicKeychain) {\n          accounts.push({\n            '@type': 'Account',\n            role: 'key',\n            service: 'bip32',\n            identifier: profile.auth[0].publicKeychain,\n          });\n        }\n      }\n    }\n    if (profile.pgp && profile.pgp.url) {\n      accounts.push({\n        '@type': 'Account',\n        role: 'key',\n        service: 'pgp',\n        identifier: profile.pgp.fingerprint,\n        contentUrl: profile.pgp.url,\n      });\n    }\n\n    profileData.account = accounts;\n  }\n\n  return profileData;\n}\n"],"names":["formatAccount","serviceName","data","proofUrl","proof","url","service","identifier","username","proofType","getPersonFromLegacyFormat","profile","profileData","name","formatted","bio","description","location","address","addressLocality","images","avatar","push","contentUrl","cover","length","image","website","accounts","bitcoin","role","twitter","facebook","github","auth","publicKeychain","pgp","fingerprint","account"],"mappings":"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"}