{"version":3,"file":"sessionData.esm.js","sources":["../src/sessionData.ts"],"sourcesContent":["import { InvalidStateError } from '@stacks/common';\nimport { UserData } from './userData';\n\nconst SESSION_VERSION = '1.0.0';\n\ntype EtagMap = { [key: string]: string };\n\nexport interface SessionOptions {\n  coreNode?: string;\n  userData?: UserData;\n  transitKey?: string;\n  etags?: EtagMap;\n  localStorageKey?: string;\n  storeOptions?: {\n    localStorageKey?: string;\n  };\n}\n\n/**\n * @ignore\n */\nexport class SessionData {\n  version: string;\n\n  transitKey?: string;\n\n  // using this in place of\n  // window.localStorage.setItem(BLOCKSTACK_STORAGE_LABEL, JSON.stringify(userData))\n  userData?: UserData;\n\n  etags?: EtagMap;\n\n  constructor(options: SessionOptions) {\n    this.version = SESSION_VERSION;\n    this.userData = options.userData;\n    this.transitKey = options.transitKey;\n    this.etags = options.etags ? options.etags : {};\n  }\n\n  // getGaiaHubConfig(): GaiaHubConfig {\n  //   return this.userData && this.userData.gaiaHubConfig\n  // }\n\n  // setGaiaHubConfig(config: GaiaHubConfig): void {\n  //   this.userData.gaiaHubConfig = config\n  // }\n\n  static fromJSON(json: any): SessionData {\n    if (json.version !== SESSION_VERSION) {\n      throw new InvalidStateError(`JSON data version ${json.version} not supported by SessionData`);\n    }\n    const options: SessionOptions = {\n      coreNode: json.coreNode,\n      userData: json.userData,\n      transitKey: json.transitKey,\n      etags: json.etags,\n    };\n    return new SessionData(options);\n  }\n\n  toString(): string {\n    return JSON.stringify(this);\n  }\n}\n"],"names":["SESSION_VERSION","SessionData","options","version","userData","transitKey","etags","fromJSON","json","InvalidStateError","coreNode","toString","JSON","stringify"],"mappings":";;AAGA,IAAMA,eAAe,GAAG,OAAxB;IAkBaC,WAAb;AAWE,uBAAYC,OAAZ;AACE,SAAKC,OAAL,GAAeH,eAAf;AACA,SAAKI,QAAL,GAAgBF,OAAO,CAACE,QAAxB;AACA,SAAKC,UAAL,GAAkBH,OAAO,CAACG,UAA1B;AACA,SAAKC,KAAL,GAAaJ,OAAO,CAACI,KAAR,GAAgBJ,OAAO,CAACI,KAAxB,GAAgC,EAA7C;AACD;;AAhBH,cA0BSC,QA1BT,GA0BE,kBAAgBC,IAAhB;AACE,QAAIA,IAAI,CAACL,OAAL,KAAiBH,eAArB,EAAsC;AACpC,YAAM,IAAIS,iBAAJ,wBAA2CD,IAAI,CAACL,OAAhD,mCAAN;AACD;;AACD,QAAMD,OAAO,GAAmB;AAC9BQ,MAAAA,QAAQ,EAAEF,IAAI,CAACE,QADe;AAE9BN,MAAAA,QAAQ,EAAEI,IAAI,CAACJ,QAFe;AAG9BC,MAAAA,UAAU,EAAEG,IAAI,CAACH,UAHa;AAI9BC,MAAAA,KAAK,EAAEE,IAAI,CAACF;AAJkB,KAAhC;AAMA,WAAO,IAAIL,WAAJ,CAAgBC,OAAhB,CAAP;AACD,GArCH;;AAAA;;AAAA,SAuCES,QAvCF,GAuCE;AACE,WAAOC,IAAI,CAACC,SAAL,CAAe,IAAf,CAAP;AACD,GAzCH;;AAAA;AAAA;;;;"}